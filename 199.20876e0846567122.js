"use strict";(self.webpackChunkGSCal=self.webpackChunkGSCal||[]).push([[199],{2199:(gt,u,r)=>{r.r(u),r.d(u,{CharacterModule:()=>pt});var c=r(9808),A=r(9764),D=r(9091),M=r(1787),_=r(7154),h=r(1777),t=r(5e3),G=r(7093),s=r(9224),g=r(3737),U=r(4834),p=r(288),m=r(7322),N=r(4107),x=r(3075),T=r(508),f=r(7238),L=r(4218),E=r(5348);function B(a,o){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",13),t.ALo(2,"number"),t.ALo(3,"translate"),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("value",e)("innerText",t.xi3(2,2,e.level,"1.0-0")+(e.isAscend?t.lcZ(3,5,"PROPS.ASCENDED"):""))}}function R(a,o){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",14),t.ALo(2,"translate"),t._UZ(3,"td",15),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"noComma"),t.ALo(7,"number"),t.qZA()),2&a){const e=o.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,n.selectedLevelProps[e].value,"1.0-1")):t.lcZ(6,10,t.xi3(7,12,n.selectedLevelProps[e].value,"1.0-0")))("matTooltip",n.selectedLevelProps[e].value)}}function Z(a,o){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",14),t.ALo(2,"translate"),t._UZ(3,"td",15),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"noComma"),t.ALo(7,"number"),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,n.selectedLevelProps[e].value,"1.0-1")):t.lcZ(6,10,t.xi3(7,12,n.selectedLevelProps[e].value,"1.0-0")))("matTooltip",n.selectedLevelProps[e].value)}}function b(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Z,8,15,"tr",0),t.BQk()),2&a){const e=o.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.selectedLevelProps[e])}}function y(a,o){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-card",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"div",6),t.TgZ(8,"mat-card-title"),t._uU(9),t.qZA(),t.TgZ(10,"mat-card-subtitle"),t._uU(11),t.qZA()(),t.TgZ(12,"mat-card-content",7),t._UZ(13,"mat-divider"),t.TgZ(14,"mat-expansion-panel",8)(15,"mat-expansion-panel-header")(16,"mat-panel-title"),t._UZ(17,"span",9),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"mat-panel-description"),t.qZA(),t.TgZ(20,"mat-form-field",10),t._UZ(21,"mat-label",9),t.ALo(22,"translate"),t.TgZ(23,"mat-select",11),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().selectedLevel=i})("ngModelChange",function(i){return t.CHM(e),t.oxw().onChangeLevel(i)}),t.YNc(24,B,4,7,"ng-container",12),t.qZA()(),t.TgZ(25,"table"),t.YNc(26,R,8,15,"tr",12),t.YNc(27,b,2,1,"ng-container",12),t.qZA()()()(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(7),t.Udp("background-image",e.avatarLoadFlg?"url("+e.avatarURL+")":""),t.xp6(2),t.Oqu(e.data.fullname),t.xp6(2),t.AsE("",e.data.weapontype," \xa0 <",e.data.element,"> "),t.xp6(3),t.Q6J("expanded",!0),t.xp6(3),t.Q6J("innerText",t.lcZ(18,12,"CHARACTER.PROPS")),t.xp6(4),t.Q6J("innerText",t.lcZ(22,14,"PROPS.LEVEL")),t.xp6(2),t.Q6J("ngModel",e.selectedLevel),t.xp6(1),t.Q6J("ngForOf",e.levelOptions),t.xp6(2),t.Q6J("ngForOf",e.props),t.xp6(1),t.Q6J("ngForOf",e.props_sub)}}let I=(()=>{class a{constructor(e){this.httpService=e,this.minLevel=1,this.maxLevel=90,this.ascendLevels=[20,40,50,60,70,80,90],this.props=["LEVEL","HP","ATTACK","DEFENSE"],this.props_sub=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","ELEMENTAL_MASTERY","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.percent_props=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.levelOptions=[]}ngOnInit(){this.initializeBackGroundImage();for(let e=this.minLevel;e<=this.maxLevel;++e)this.levelOptions.push({level:e}),this.ascendLevels.includes(e)&&e!=this.maxLevel&&this.levelOptions.push({level:e,isAscend:!0});this.selectedLevel=this.levelOptions[this.levelOptions.length-1],this.onChangeLevel(this.selectedLevel)}onChangeLevel(e){this.selectedLevelProps={};let n=this.dataForCal.stats(e.level,e.isAscend?"+":void 0);for(let i of this.props)this.selectedLevelProps[i]={isPercent:!1,value:n[i.toLowerCase()]};if(this.dataForCal.substat){const i=_.hx.MAP_PROPS_SPECIALIZED[this.dataForCal.substat];this.selectedLevelProps[i]={isPercent:this.percent_props.includes(i),value:n.specialized}}}initializeBackGroundImage(){var e;this.avatarURL||(this.avatarLoadFlg=!1,this.httpService.get(null!==(e=this.data.images["hoyolab-avatar"])&&void 0!==e?e:this.data.images.icon,"blob").then(n=>{n&&(this.avatarURL=window.URL.createObjectURL(n),setTimeout(()=>{this.avatarLoadFlg=!0},100))}))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(_.OE))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-character"]],inputs:{data:"data",dataForCal:"dataForCal"},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["mat-card-avatar","",1,"avatar"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[3,"innerText"],["appearance","legacy","floatLabel","always"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"]],template:function(e,n){1&e&&t.YNc(0,y,28,16,"ng-container",0),2&e&&t.Q6J("ngIf",n.data)},directives:[c.O5,s.a8,g.Zt,g.Bh,s.dk,s.kc,s.n5,s.$j,s.dn,U.d,p.ib,p.yz,p.yK,p.u4,m.KE,m.hX,N.gD,x.JJ,x.On,c.sg,T.ey,f.gM],pipes:[L.X$,c.JJ,E.o,c.Zx],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:10px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function J(a,o){if(1&a&&t._UZ(0,"mat-option",14),2&a){const e=t.oxw().$implicit;t.Q6J("value",e.queryName)("innerText",e.name)}}function w(a,o){if(1&a&&(t.ynx(0),t.YNc(1,J,1,2,"mat-option",13),t.BQk()),2&a){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",e.weaponType==n.charWeaponType)}}function Q(a,o){if(1&a&&(t._UZ(0,"mat-option",14),t.ALo(1,"number"),t.ALo(2,"translate")),2&a){const e=t.oxw().$implicit;t.Q6J("value",e)("innerText",t.xi3(1,2,e.level,"1.0-0")+(e.isAscend?t.lcZ(2,5,"PROPS.ASCENDED"):""))}}function Y(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Q,3,7,"mat-option",13),t.BQk()),2&a){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",e.level<n.selectedWeaponAbleMaxLevel||e.level==n.selectedWeaponAbleMaxLevel&&!e.isAscend)}}function H(a,o){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",15),t.ALo(2,"translate"),t._UZ(3,"td",16),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"noComma"),t.ALo(7,"number"),t.qZA()),2&a){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,n.selectedLevelProps[e].value,"1.0-1")):t.lcZ(6,10,t.xi3(7,12,n.selectedLevelProps[e].value,"1.0-0")))("matTooltip",n.selectedLevelProps[e].value)}}function F(a,o){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",15),t.ALo(2,"translate"),t._UZ(3,"td",16),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"noComma"),t.ALo(7,"number"),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,n.selectedLevelProps[e].value,"1.0-1")):t.lcZ(6,10,t.xi3(7,12,n.selectedLevelProps[e].value,"1.0-0")))("matTooltip",n.selectedLevelProps[e].value)}}function k(a,o){if(1&a&&(t.ynx(0),t.YNc(1,F,8,15,"tr",17),t.BQk()),2&a){const e=o.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.selectedLevelProps[e])}}let z=(()=>{class a{constructor(e,n,i){this.httpService=e,this.weaponService=n,this.languageService=i,this.notExitLevel=-1,this.minLevel=1,this.maxLevel=90,this.ascendLevels=[20,40,50,60,70,80,90],this.ascendLevelsMap={5:6,4:6,3:6,2:4,1:4},this.props=["LEVEL","ATTACK"],this.props_sub=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","ELEMENTAL_MASTERY","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.percent_props=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.weaponList=[],this.levelOptions=[],this.languageService.getLang().subscribe(l=>{this.initializeWeaponList(),this.selectedWeaponKey&&(this.data=this.weaponService.get(this.selectedWeaponKey,l))})}ngOnInit(){this.initializeWeaponList();for(let e=this.minLevel;e<=this.maxLevel;++e)this.levelOptions.push({level:e}),this.ascendLevels.includes(e)&&e!=this.maxLevel&&this.levelOptions.push({level:e,isAscend:!0});for(let e=1;e<this.weaponList.length;++e)if(this.weaponList[e].weaponType==this.charWeaponType&&5==this.weaponList[e].rarity){this.selectedWeaponKey=this.weaponList[e].queryName;break}this.selectedLevel=this.levelOptions[this.levelOptions.length-1],this.onSelectWeapon(this.selectedWeaponKey)}onSelectWeapon(e){let n=this.notExitLevel;this.data&&(n=this.ascendLevels[this.ascendLevelsMap[this.data.rarity]]),this.data=this.weaponService.get(e),this.dataForCal=this.weaponService.get(e,_.hx.QUERY_LANG),this.selectedWeaponAbleMaxLevel=this.ascendLevels[this.ascendLevelsMap[this.data.rarity]],(n==this.notExitLevel||n==this.selectedLevel.level||this.selectedLevel.level>this.selectedWeaponAbleMaxLevel)&&(this.selectedLevel=this.levelOptions[this.selectedWeaponAbleMaxLevel+this.ascendLevels.indexOf(this.selectedWeaponAbleMaxLevel)-1]),this.onChangeLevel(this.selectedLevel),this.initializeBackGroundImage()}onChangeLevel(e){this.selectedLevelProps={};let n=this.dataForCal.stats(e.level,e.isAscend?"+":void 0);for(let i of this.props)this.selectedLevelProps[i]={isPercent:!1,value:n[i.toLowerCase()]};if(this.dataForCal.substat){const i=_.hx.MAP_PROPS_SPECIALIZED[this.dataForCal.substat];this.selectedLevelProps[i]={isPercent:this.percent_props.includes(i),value:n.specialized}}}initializeBackGroundImage(){this.avatarLoadFlg=!1,this.httpService.get(this.data.images.icon,"blob").then(e=>{e&&(this.avatarURL=window.URL.createObjectURL(e),setTimeout(()=>{this.avatarLoadFlg=!0},100))})}initializeWeaponList(e){this.weaponList=[],this.weaponService.getMap(e).forEach((n,i)=>{this.weaponList.push({queryName:i,name:n.name,rarity:n.rarity,weaponType:n.weapontype})})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(_.OE),t.Y36(_.kv),t.Y36(_.TS))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-weapon"]],inputs:{charWeaponType:"charWeaponType"},decls:30,vars:18,consts:[["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["mat-card-avatar","",1,"avatar"],[1,"header-text"],["appearance","legacy","floatLabel","always"],[3,"innerText"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[3,"value","innerText",4,"ngIf"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"],[4,"ngIf"]],template:function(e,n){1&e&&(t.ynx(0),t.TgZ(1,"mat-card",0)(2,"div",1),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"path",3)(5,"path",4),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"div",5),t.TgZ(8,"mat-card-title",6)(9,"mat-form-field",7),t._UZ(10,"mat-label",8),t.ALo(11,"translate"),t.TgZ(12,"mat-select",9),t.NdJ("ngModelChange",function(l){return n.selectedWeaponKey=l})("ngModelChange",function(l){return n.onSelectWeapon(l)}),t.YNc(13,w,2,1,"ng-container",10),t.qZA()()()(),t.TgZ(14,"mat-card-content",11),t._UZ(15,"mat-divider"),t.TgZ(16,"mat-expansion-panel",12)(17,"mat-expansion-panel-header")(18,"mat-panel-title"),t._UZ(19,"span",8),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"mat-panel-description"),t.qZA(),t.TgZ(22,"mat-form-field",7),t._UZ(23,"mat-label",8),t.ALo(24,"translate"),t.TgZ(25,"mat-select",9),t.NdJ("ngModelChange",function(l){return n.selectedLevel=l})("ngModelChange",function(l){return n.onChangeLevel(l)}),t.YNc(26,Y,2,1,"ng-container",10),t.qZA()(),t.TgZ(27,"table"),t.YNc(28,H,8,15,"tr",10),t.YNc(29,k,2,1,"ng-container",10),t.qZA()()()(),t.BQk()),2&e&&(t.xp6(7),t.Udp("background-image",n.avatarLoadFlg?"url("+n.avatarURL+")":""),t.xp6(3),t.Q6J("innerText",t.lcZ(11,12,"WEAPON.NAME")),t.xp6(2),t.Q6J("ngModel",n.selectedWeaponKey),t.xp6(1),t.Q6J("ngForOf",n.weaponList),t.xp6(3),t.Q6J("expanded",!0),t.xp6(3),t.Q6J("innerText",t.lcZ(20,14,"WEAPON.PROPS")),t.xp6(4),t.Q6J("innerText",t.lcZ(24,16,"PROPS.LEVEL")),t.xp6(2),t.Q6J("ngModel",n.selectedLevel),t.xp6(1),t.Q6J("ngForOf",n.levelOptions),t.xp6(2),t.Q6J("ngForOf",n.props),t.xp6(1),t.Q6J("ngForOf",n.props_sub))},directives:[s.a8,g.Zt,g.Bh,s.dk,s.kc,s.n5,m.KE,m.hX,N.gD,x.JJ,x.On,c.sg,c.O5,T.ey,s.dn,U.d,p.ib,p.yz,p.yK,p.u4,f.gM],pipes:[L.X$,c.JJ,E.o,c.Zx],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:10px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px;border-radius:0%}.header-text[_ngcontent-%COMP%]{font-size:inherit}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();var P=r(9396);function W(a,o){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",13),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("value",e)("innerText",e)}}function K(a,o){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",14)(2,"td",15),t.qZA()),2&a){const e=o.$implicit,n=t.oxw(),i=n.$implicit,l=n.index,d=t.oxw(2);t.xp6(1),t.Q6J("innerText",e.key),t.xp6(1),t.Q6J("innerText",d.getTalentValue(i,e,d.selectedLevels[l]))("matTooltip",d.getTalentValue(i,e,d.selectedLevels[l],!0))}}function $(a,o){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header",10),t.ALo(3,"noStrong"),t.TgZ(4,"mat-panel-title"),t._UZ(5,"span",6),t.qZA()(),t.TgZ(6,"mat-form-field",11),t._UZ(7,"mat-label",6),t.ALo(8,"translate"),t.TgZ(9,"mat-select",12),t.NdJ("ngModelChange",function(i){const d=t.CHM(e).index;return t.oxw(2).selectedLevels[d]=i})("ngModelChange",function(i){return t.CHM(e),t.oxw(2).onChangeLevel(1,i)}),t.YNc(10,W,2,2,"ng-container",8),t.qZA()(),t.TgZ(11,"table"),t.YNc(12,K,3,3,"tr",8),t.qZA()(),t.BQk()}if(2&a){const e=o.$implicit,n=o.index,i=t.oxw(2);t.xp6(2),t.Q6J("matTooltip",t.lcZ(3,6,i.getDataProperty(i.combatPrefix+e).info)),t.xp6(3),t.Q6J("innerText",i.getDataProperty(i.combatPrefix+e).name),t.xp6(2),t.Q6J("innerText",t.lcZ(8,8,"PROPS.LEVEL")),t.xp6(2),t.Q6J("ngModel",i.selectedLevels[n]),t.xp6(1),t.Q6J("ngForOf",i.levelOptions),t.xp6(2),t.Q6J("ngForOf",i.getDataProperty(i.combatPrefix+e).values)}}function V(a,o){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",14)(2,"td",15),t.qZA()),2&a){const e=o.$implicit,n=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("innerText",e.key),t.xp6(1),t.Q6J("innerText",i.getTalentValue(n,e,1))("matTooltip",i.getTalentValue(n,e,1,!0))}}function q(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header",10),t.ALo(3,"noStrong"),t.TgZ(4,"mat-panel-title"),t._UZ(5,"span",6),t.qZA()(),t.TgZ(6,"table"),t.YNc(7,V,3,3,"tr",8),t.qZA()(),t.BQk()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("matTooltip",t.lcZ(3,3,n.getDataProperty(n.combatPrefix+e).info)),t.xp6(3),t.Q6J("innerText",n.getDataProperty(n.combatPrefix+e).name),t.xp6(2),t.Q6J("ngForOf",n.getDataProperty(n.combatPrefix+e).values)}}function X(a,o){if(1&a&&(t.ynx(0),t.YNc(1,q,8,5,"ng-container",0),t.BQk()),2&a){const e=o.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.getDataProperty(n.combatPrefix+e))}}function j(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._UZ(4,"span",6),t.qZA()(),t._UZ(5,"span",6),t.ALo(6,"noStrong"),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(4),t.Q6J("innerText",n.getDataProperty(n.passivefix+e).name),t.xp6(1),t.Q6J("innerText",t.lcZ(6,2,n.getDataProperty(n.passivefix+e).info))}}function tt(a,o){if(1&a&&(t.ynx(0),t.YNc(1,j,7,4,"ng-container",0),t.BQk()),2&a){const e=o.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.getDataProperty(n.passivefix+e))}}function et(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-card",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"mat-card-title",6),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-card-content",7)(10,"mat-accordion"),t.YNc(11,$,13,10,"ng-container",8),t.YNc(12,X,2,1,"ng-container",8),t.YNc(13,tt,2,1,"ng-container",8),t.qZA()()(),t.BQk()),2&a){const e=t.oxw();t.xp6(7),t.Q6J("innerText",t.lcZ(8,4,"CHARACTER.TALENTS")),t.xp6(4),t.Q6J("ngForOf",e.combatNum),t.xp6(1),t.Q6J("ngForOf",e.combatspNum),t.xp6(1),t.Q6J("ngForOf",e.passiveNum)}}let nt=(()=>{class a{constructor(e,n,i){this.percentPipe=e,this.decimalPipe=n,this.noCommaPipe=i,this.minLevel=1,this.maxLevel=15,this.defaultLevel=10,this.combatPrefix="combat",this.combatspPrefix="combatsp",this.passivefix="passive",this.combats=["combat1","combat2","combat3"],this.combatsps=["combatsp"],this.passives=["passive1","passive2","passive3"],this.combatNum=[1,2,3],this.combatspNum=["sp"],this.passiveNum=[1,2,3],this.props=["LEVEL","HP","ATTACK","DEFENSE"],this.props_sub=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","ELEMENTAL_MASTERY","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.percent_props=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.levelOptions=[],this.selectedLevels=[]}ngOnInit(){for(let e=this.minLevel;e<=this.maxLevel;++e)this.levelOptions.push(e);this.selectedLevels=Array.from({length:this.combatNum.length}).map((e,n)=>this.defaultLevel),this.selectedLevels.forEach((e,n)=>{this.onChangeLevel(n+1,e)})}onChangeLevel(e,n){}getDataProperty(e){return this.data.talents[e]}getTalentValue(e,n,i,l=!1){let d=n.prefix,O=[];n.valuePropKeys.forEach((C,dt)=>{let v=this.data.talents["combat"+e].attributes.parameters[C][i-1];l||(v=n.isPercent[dt]?this.percentPipe.transform(v,"1.0-1"):this.noCommaPipe.transform(this.decimalPipe.transform(v,"1.0-1"))),O.push(`${v}`)});let S=0,_t=n.middles.length;for(let C=0;C<O.length;++C)d+=O[C],S<_t&&(d+=n.middles[S++]);return d+=n.suffix,d}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.Zx),t.Y36(c.JJ),t.Y36(E.o))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-talent"]],inputs:{data:"data",dataForCal:"dataForCal"},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","expand"],["matTooltipPosition","right",3,"matTooltip"],["appearance","legacy","floatLabel","always"],[3,"ngModel","ngModelChange"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"]],template:function(e,n){1&e&&t.YNc(0,et,14,6,"ng-container",0),2&e&&t.Q6J("ngIf",n.data.talents)},directives:[c.O5,s.a8,g.Zt,g.Bh,s.dk,s.n5,s.dn,p.pp,c.sg,p.ib,p.yz,f.gM,p.yK,m.KE,m.hX,N.gD,x.JJ,x.On,T.ey],pipes:[L.X$,P.K],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:10px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function at(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._UZ(4,"span",6),t.qZA()(),t._UZ(5,"span",6),t.ALo(6,"noStrong"),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(4),t.Q6J("innerText",n.getDataProperty(n.constellationPrefix+e).name),t.xp6(1),t.Q6J("innerText",t.lcZ(6,2,n.getDataProperty(n.constellationPrefix+e).effect))}}function ot(a,o){if(1&a&&(t.ynx(0),t.YNc(1,at,7,4,"ng-container",0),t.BQk()),2&a){const e=o.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.getDataProperty(n.constellationPrefix+e))}}function it(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-card",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"mat-card-title",6),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-card-content",7)(10,"mat-accordion"),t.YNc(11,ot,2,1,"ng-container",8),t.qZA()()(),t.BQk()),2&a){const e=t.oxw();t.xp6(7),t.Q6J("innerText",t.lcZ(8,2,"CHARACTER.CONSTELLATION")),t.xp6(4),t.Q6J("ngForOf",e.constellationNum)}}let rt=(()=>{class a{constructor(e){this.percentPipe=e,this.constellationPrefix="c",this.constellationNum=[1,2,3,4,5,6],this.props=["LEVEL","HP","ATTACK","DEFENSE"],this.props_sub=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","ELEMENTAL_MASTERY","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.percent_props=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.levelOptions=[],this.selectedLevels=[]}ngOnInit(){}getDataProperty(e){return this.data.constellations[e]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.Zx))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-constellation"]],inputs:{data:"data",dataForCal:"dataForCal"},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","expand"]],template:function(e,n){1&e&&t.YNc(0,it,12,4,"ng-container",0),2&e&&t.Q6J("ngIf",n.data.constellations)},directives:[c.O5,s.a8,g.Zt,g.Bh,s.dk,s.n5,s.dn,p.pp,c.sg,p.ib,p.yz,p.yK],pipes:[L.X$,P.K],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:10px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function lt(a,o){if(1&a&&t._UZ(0,"div",5),2&a){const e=t.oxw();t.Udp("background-image","url("+e.backgroundURL+")"),t.Q6J("@imgLoad",e.backgroundLoadFlg?"loaded":"beforeLoad")}}const ct=[{path:"",component:(()=>{class a{constructor(e,n,i,l){this.httpService=e,this.route=n,this.characterService=i,this.languageService=l,this.languageService.getLang().subscribe(d=>{this.data=this.characterService.get(this.currentCharacterName,d),console.log(this.data)})}ngOnInit(){this.route.queryParams.subscribe(e=>{this.dataForCal=this.characterService.get(e.name,_.hx.QUERY_LANG),this.data=this.characterService.get(e.name),this.currentCharacterName=this.dataForCal.fullname,this.initializeBackGroundImage(),console.log(this.data)})}initializeBackGroundImage(){var e;this.backgroundURL||(this.backgroundLoadFlg=!1,this.httpService.get(null!==(e=this.data.images.cover1)&&void 0!==e?e:this.data.images.portrait,"blob").then(n=>{n&&(this.backgroundURL=window.URL.createObjectURL(n),setTimeout(()=>{this.backgroundLoadFlg=!0},100))}))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(_.OE),t.Y36(M.gz),t.Y36(_.AE),t.Y36(_.TS))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-main"]],decls:7,vars:8,consts:[[1,"main"],["class","background",3,"background-image",4,"ngIf"],["fxLayout","row wrap",1,"content"],[1,"float",3,"data","dataForCal"],[1,"float",3,"charWeaponType"],[1,"background"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,lt,1,3,"div",1),t.TgZ(2,"div",2),t._UZ(3,"app-character",3)(4,"app-weapon",4)(5,"app-talent",3)(6,"app-constellation",3),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.backgroundURL),t.xp6(2),t.Q6J("data",n.data)("dataForCal",n.dataForCal),t.xp6(1),t.Q6J("charWeaponType",n.data.weapontype),t.xp6(1),t.Q6J("data",n.data)("dataForCal",n.dataForCal),t.xp6(1),t.Q6J("data",n.data)("dataForCal",n.dataForCal))},directives:[c.O5,G.xw,I,z,nt,rt],styles:[".main[_ngcontent-%COMP%]{height:100%}.content[_ngcontent-%COMP%]{padding:6px}.background[_ngcontent-%COMP%]{position:fixed;bottom:0;background-position:right top;background-size:cover;z-index:-10;min-height:100%;width:100%}"],data:{animation:[(0,h.X$)("imgLoad",[(0,h.SB)("beforeLoad",(0,h.oB)({opacity:.01})),(0,h.SB)("loaded",(0,h.oB)({opacity:.16})),(0,h.eR)("beforeLoad=>loaded, loaded=>beforeLoad",[(0,h.jt)("1s")])])]}}),a})()}];let st=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[M.Bz.forChild(ct)],M.Bz]}),a})(),pt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[c.Zx,c.JJ,_.od],imports:[[c.ez,A.o9,D.h,st,_.m8]]}),a})()}}]);