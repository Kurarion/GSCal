"use strict";(self.webpackChunkGSCal=self.webpackChunkGSCal||[]).push([[290],{2290:(Te,S,r)=>{r.r(S),r.d(S,{CharacterModule:()=>Me});var s=r(9808),D=r(9764),G=r(9091),u=r(1787),p=r(8443),d=r(1777),e=r(5e3),R=r(7093),h=r(2340),c=r(9224),m=r(3737),P=r(4834),_=r(288),x=r(7322),N=r(4107),O=r(3075),E=r(508),T=r(7238),v=r(4218),f=r(5348);function Z(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",13),e.ALo(2,"number"),e.ALo(3,"translate"),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",e.xi3(2,2,t.level,"1.0-0")+(t.isAscend?e.lcZ(3,5,"PROPS.ASCENDED"):""))}}function B(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",14),e.ALo(2,"translate"),e._UZ(3,"td",15),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function y(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",14),e.ALo(2,"translate"),e._UZ(3,"td",15),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function b(a,o){if(1&a&&(e.ynx(0),e.YNc(1,y,8,15,"tr",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.selectedLevelProps[t])}}function I(a,o){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card",1)(2,"div",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header"),e._UZ(7,"div",6),e.TgZ(8,"mat-card-title"),e._uU(9),e.qZA(),e.TgZ(10,"mat-card-subtitle"),e._uU(11),e.qZA()(),e.TgZ(12,"mat-card-content",7),e._UZ(13,"mat-divider"),e.TgZ(14,"mat-expansion-panel",8)(15,"mat-expansion-panel-header")(16,"mat-panel-title"),e._UZ(17,"span",9),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"mat-panel-description"),e.qZA(),e.TgZ(20,"mat-form-field",10),e._UZ(21,"mat-label",9),e.ALo(22,"translate"),e.TgZ(23,"mat-select",11),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selectedLevel=i})("ngModelChange",function(i){return e.CHM(t),e.oxw().onChangeLevel(i)}),e.YNc(24,Z,4,7,"ng-container",12),e.qZA()(),e.TgZ(25,"table"),e.YNc(26,B,8,15,"tr",12),e.YNc(27,b,2,1,"ng-container",12),e.qZA()()()(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(7),e.Udp("background-image",t.avatarLoadFlg?"url("+t.avatarURL+")":""),e.xp6(2),e.Oqu(t.data.fullname),e.xp6(2),e.AsE("",t.data.weapontype," \xa0 <",t.data.element,"> "),e.xp6(3),e.Q6J("expanded",!0),e.xp6(3),e.Q6J("innerText",e.lcZ(18,12,"CHARACTER.PROPS")),e.xp6(4),e.Q6J("innerText",e.lcZ(22,14,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",t.selectedLevel),e.xp6(1),e.Q6J("ngForOf",t.levelOptions),e.xp6(2),e.Q6J("ngForOf",t.props),e.xp6(1),e.Q6J("ngForOf",t.props_sub)}}let J=(()=>{class a{constructor(t,n){this.httpService=t,this.extraDataService=n,this.minLevel=1,this.maxLevel=90,this.ascendLevels=[20,40,50,60,70,80,90],this.props=["LEVEL","HP","ATTACK","DEFENSE"],this.props_sub=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","ELEMENTAL_MASTERY","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.percent_props=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.levelOptions=[]}ngOnInit(){this.initializeBackGroundImage();for(let t=this.minLevel;t<=this.maxLevel;++t)this.levelOptions.push({level:t}),this.ascendLevels.includes(t)&&t!=this.maxLevel&&this.levelOptions.push({level:t,isAscend:!0});this.selectedLevel=this.levelOptions[this.levelOptions.length-1],this.onChangeLevel(this.selectedLevel)}onChangeLevel(t){this.selectedLevelProps={};let n=this.dataForCal.stats(t.level,t.isAscend?"+":void 0);for(let i of this.props)this.selectedLevelProps[i]={isPercent:!1,value:n[i.toLowerCase()]};if(this.dataForCal.substat){const i=p.hx.MAP_PROPS_SPECIALIZED[this.dataForCal.substat];this.selectedLevelProps[i]={isPercent:this.percent_props.includes(i),value:n.specialized}}}initializeBackGroundImage(){var t;if(!this.avatarURL){this.avatarLoadFlg=!1;let n=null!==(t=this.data.images["hoyolab-avatar"])&&void 0!==t?t:this.data.images.icon;h.N.useThirdPartyAPI&&(n=h.N.thirdPartyAPIHost+this.data.images.nameicon+h.N.thirdPartyAPIPicType),this.httpService.get(n,"blob").then(i=>{i&&(this.avatarURL=window.URL.createObjectURL(i),setTimeout(()=>{this.avatarLoadFlg=!0},100))}).catch(()=>{})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.OE),e.Y36(p.Xx))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character"]],inputs:{data:"data",dataForCal:"dataForCal"},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["mat-card-avatar","",1,"avatar"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[3,"innerText"],["appearance","legacy","floatLabel","always"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"]],template:function(t,n){1&t&&e.YNc(0,I,28,16,"ng-container",0),2&t&&e.Q6J("ngIf",n.data)},directives:[s.O5,c.a8,m.Zt,m.Bh,c.dk,c.kc,c.n5,c.$j,c.dn,P.d,_.ib,_.yz,_.yK,_.u4,x.KE,x.hX,N.gD,O.JJ,O.On,s.sg,E.ey,T.gM],pipes:[v.X$,s.JJ,f.o,s.Zx],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:10px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function Q(a,o){if(1&a&&e._UZ(0,"mat-option",15),2&a){const t=e.oxw().$implicit;e.Q6J("value",t.queryName)("innerText",t.name)}}function Y(a,o){if(1&a&&(e.ynx(0),e.YNc(1,Q,1,2,"mat-option",14),e.BQk()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.weaponType==n.charWeaponType)}}function H(a,o){if(1&a&&(e._UZ(0,"mat-option",15),e.ALo(1,"number"),e.ALo(2,"translate")),2&a){const t=e.oxw().$implicit;e.Q6J("value",t)("innerText",e.xi3(1,2,t.level,"1.0-0")+(t.isAscend?e.lcZ(2,5,"PROPS.ASCENDED"):""))}}function w(a,o){if(1&a&&(e.ynx(0),e.YNc(1,H,3,7,"mat-option",14),e.BQk()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.level<n.selectedWeaponAbleMaxLevel||t.level==n.selectedWeaponAbleMaxLevel&&!t.isAscend)}}function F(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",16),e.ALo(2,"translate"),e._UZ(3,"td",17),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function z(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",16),e.ALo(2,"translate"),e._UZ(3,"td",17),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function k(a,o){if(1&a&&(e.ynx(0),e.YNc(1,z,8,15,"tr",13),e.BQk()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.selectedLevelProps[t])}}function K(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",15),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",t)}}function W(a,o){if(1&a){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider"),e.TgZ(2,"mat-expansion-panel",12)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e._UZ(5,"span",8),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-panel-description"),e.qZA(),e.TgZ(8,"mat-form-field",7),e._UZ(9,"mat-label",8),e.ALo(10,"translate"),e.TgZ(11,"mat-select",9),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selectedSmeltingLevel=i}),e.YNc(12,K,2,2,"ng-container",10),e.qZA()(),e.TgZ(13,"div"),e._UZ(14,"span",18),e.qZA()(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("expanded",!0),e.xp6(3),e.Q6J("innerText",e.lcZ(6,6,"WEAPON.SMELTING")),e.xp6(4),e.Q6J("innerText",e.lcZ(10,8,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",t.selectedSmeltingLevel),e.xp6(1),e.Q6J("ngForOf",t.smeltingLevelOptions),e.xp6(2),e.Q6J("innerHTML",t.getEffectContent(t.selectedSmeltingLevel),e.oJD)}}let $=(()=>{class a{constructor(t,n,i,l){this.httpService=t,this.weaponService=n,this.languageService=i,this.extraDataService=l,this.notExitLevel=-1,this.minLevel=1,this.maxLevel=90,this.minSmeltingLevel=1,this.maxSmeltingLevel=5,this.defaultSmeltingLevel=this.minSmeltingLevel,this.ascendLevels=[20,40,50,60,70,80,90],this.ascendLevelsMap={5:6,4:6,3:6,2:4,1:4},this.smeltingPropPrefix="r",this.props=["LEVEL","ATTACK"],this.props_sub=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","ELEMENTAL_MASTERY","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.percent_props=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.weaponList=[],this.levelOptions=[],this.smeltingLevelOptions=[],this.languageService.getLang().subscribe(g=>{this.initializeWeaponList(),this.selectedWeaponKey&&(this.data=this.weaponService.get(this.selectedWeaponKey,g))})}ngOnInit(){this.initializeWeaponList();for(let t=this.minLevel;t<=this.maxLevel;++t)this.levelOptions.push({level:t}),this.ascendLevels.includes(t)&&t!=this.maxLevel&&this.levelOptions.push({level:t,isAscend:!0});for(let t=this.minSmeltingLevel;t<=this.maxSmeltingLevel;++t)this.smeltingLevelOptions.push(t);for(let t=1;t<this.weaponList.length;++t)if(this.weaponList[t].weaponType==this.charWeaponType&&5==this.weaponList[t].rarity){this.selectedWeaponKey=this.weaponList[t].queryName;break}this.selectedLevel=this.levelOptions[this.levelOptions.length-1],this.selectedSmeltingLevel=this.defaultSmeltingLevel,this.onSelectWeapon(this.selectedWeaponKey)}onSelectWeapon(t){let n=this.notExitLevel;this.data&&(n=this.ascendLevels[this.ascendLevelsMap[this.data.rarity]]),this.data=this.weaponService.get(t),this.dataForCal=this.weaponService.get(t,p.hx.QUERY_LANG),console.log(this.data),this.selectedWeaponAbleMaxLevel=this.ascendLevels[this.ascendLevelsMap[this.data.rarity]],(n==this.notExitLevel||n==this.selectedLevel.level||this.selectedLevel.level>this.selectedWeaponAbleMaxLevel)&&(this.selectedLevel=this.levelOptions[this.selectedWeaponAbleMaxLevel+this.ascendLevels.indexOf(this.selectedWeaponAbleMaxLevel)-1]),this.onChangeLevel(this.selectedLevel),this.initializeBackGroundImage()}onChangeLevel(t){this.selectedLevelProps={};let n=this.dataForCal.stats(t.level,t.isAscend?"+":void 0);for(let i of this.props)this.selectedLevelProps[i]={isPercent:!1,value:n[i.toLowerCase()]};if(this.dataForCal.substat){const i=p.hx.MAP_PROPS_SPECIALIZED[this.dataForCal.substat];this.selectedLevelProps[i]={isPercent:this.percent_props.includes(i),value:n.specialized}}}getEffectContent(t){let n="",i=0,l=this.data.r1.length;return this.data.effect.split(/\{\d+\}/).forEach(L=>{n+=L,i<l&&(n+="<strong>",n+=this.data[this.smeltingPropPrefix+t][i++],n+="</strong>")}),n}initializeBackGroundImage(){this.avatarLoadFlg=!1;let t=this.data.images.icon;h.N.useThirdPartyAPI&&(t=h.N.thirdPartyAPIHost+this.data.images.nameicon+h.N.thirdPartyAPIPicType),this.httpService.get(t,"blob").then(n=>{n&&(this.avatarURL=window.URL.createObjectURL(n),setTimeout(()=>{this.avatarLoadFlg=!0},100))}).catch(()=>{})}initializeWeaponList(t){this.weaponList=[],this.weaponService.getMap(t).forEach((n,i)=>{this.weaponList.push({queryName:i,name:n.name,rarity:n.rarity,weaponType:n.weapontype})})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.OE),e.Y36(p.kv),e.Y36(p.TS),e.Y36(p.Xx))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-weapon"]],inputs:{charWeaponType:"charWeaponType"},decls:31,vars:19,consts:[["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["mat-card-avatar","",1,"avatar"],[1,"header-text"],["appearance","legacy","floatLabel","always"],[3,"innerText"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[4,"ngIf"],[3,"value","innerText",4,"ngIf"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1),e.O4$(),e.TgZ(3,"svg",2),e._UZ(4,"path",3)(5,"path",4),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header"),e._UZ(7,"div",5),e.TgZ(8,"mat-card-title",6)(9,"mat-form-field",7),e._UZ(10,"mat-label",8),e.ALo(11,"translate"),e.TgZ(12,"mat-select",9),e.NdJ("ngModelChange",function(l){return n.selectedWeaponKey=l})("ngModelChange",function(l){return n.onSelectWeapon(l)}),e.YNc(13,Y,2,1,"ng-container",10),e.qZA()()()(),e.TgZ(14,"mat-card-content",11),e._UZ(15,"mat-divider"),e.TgZ(16,"mat-expansion-panel",12)(17,"mat-expansion-panel-header")(18,"mat-panel-title"),e._UZ(19,"span",8),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"mat-panel-description"),e.qZA(),e.TgZ(22,"mat-form-field",7),e._UZ(23,"mat-label",8),e.ALo(24,"translate"),e.TgZ(25,"mat-select",9),e.NdJ("ngModelChange",function(l){return n.selectedLevel=l})("ngModelChange",function(l){return n.onChangeLevel(l)}),e.YNc(26,w,2,1,"ng-container",10),e.qZA()(),e.TgZ(27,"table"),e.YNc(28,F,8,15,"tr",10),e.YNc(29,k,2,1,"ng-container",10),e.qZA()(),e.YNc(30,W,15,10,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.xp6(7),e.Udp("background-image",n.avatarLoadFlg?"url("+n.avatarURL+")":""),e.xp6(3),e.Q6J("innerText",e.lcZ(11,13,"WEAPON.NAME")),e.xp6(2),e.Q6J("ngModel",n.selectedWeaponKey),e.xp6(1),e.Q6J("ngForOf",n.weaponList),e.xp6(3),e.Q6J("expanded",!0),e.xp6(3),e.Q6J("innerText",e.lcZ(20,15,"WEAPON.PROPS")),e.xp6(4),e.Q6J("innerText",e.lcZ(24,17,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",n.selectedLevel),e.xp6(1),e.Q6J("ngForOf",n.levelOptions),e.xp6(2),e.Q6J("ngForOf",n.props),e.xp6(1),e.Q6J("ngForOf",n.props_sub),e.xp6(1),e.Q6J("ngIf",n.data.effect))},directives:[c.a8,m.Zt,m.Bh,c.dk,c.kc,c.n5,x.KE,x.hX,N.gD,O.JJ,O.On,s.sg,s.O5,E.ey,c.dn,P.d,_.ib,_.yz,_.yK,_.u4,T.gM],pipes:[v.X$,s.JJ,f.o,s.Zx],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:10px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px;border-radius:0%}.header-text[_ngcontent-%COMP%]{font-size:inherit}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();var U=r(9396);function V(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",t)}}function q(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",14)(2,"td",15),e.qZA()),2&a){const t=o.$implicit,n=e.oxw(),i=n.$implicit,l=n.index,g=e.oxw(2);e.xp6(1),e.Q6J("innerText",t.key),e.xp6(1),e.Q6J("innerText",g.getTalentValue(i,t,g.selectedLevels[l]))("matTooltip",g.getTalentValue(i,t,g.selectedLevels[l],!0))}}function X(a,o){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header",10),e.ALo(3,"noStrong"),e.TgZ(4,"mat-panel-title"),e._UZ(5,"span",6),e.qZA()(),e.TgZ(6,"mat-form-field",11),e._UZ(7,"mat-label",6),e.ALo(8,"translate"),e.TgZ(9,"mat-select",12),e.NdJ("ngModelChange",function(i){const g=e.CHM(t).index;return e.oxw(2).selectedLevels[g]=i})("ngModelChange",function(i){return e.CHM(t),e.oxw(2).onChangeLevel(1,i)}),e.YNc(10,V,2,2,"ng-container",8),e.qZA()(),e.TgZ(11,"table"),e.YNc(12,q,3,3,"tr",8),e.qZA()(),e.BQk()}if(2&a){const t=o.$implicit,n=o.index,i=e.oxw(2);e.xp6(2),e.Q6J("matTooltip",e.lcZ(3,6,i.getDataProperty(i.combatPrefix+t).info)),e.xp6(3),e.Q6J("innerText",i.getDataProperty(i.combatPrefix+t).name),e.xp6(2),e.Q6J("innerText",e.lcZ(8,8,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",i.selectedLevels[n]),e.xp6(1),e.Q6J("ngForOf",i.levelOptions),e.xp6(2),e.Q6J("ngForOf",i.getDataProperty(i.combatPrefix+t).values)}}function j(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",14)(2,"td",15),e.qZA()),2&a){const t=o.$implicit,n=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("innerText",t.key),e.xp6(1),e.Q6J("innerText",i.getTalentValue(n,t,1))("matTooltip",i.getTalentValue(n,t,1,!0))}}function ee(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header",10),e.ALo(3,"noStrong"),e.TgZ(4,"mat-panel-title"),e._UZ(5,"span",6),e.qZA()(),e.TgZ(6,"table"),e.YNc(7,j,3,3,"tr",8),e.qZA()(),e.BQk()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("matTooltip",e.lcZ(3,3,n.getDataProperty(n.combatPrefix+t).info)),e.xp6(3),e.Q6J("innerText",n.getDataProperty(n.combatPrefix+t).name),e.xp6(2),e.Q6J("ngForOf",n.getDataProperty(n.combatPrefix+t).values)}}function te(a,o){if(1&a&&(e.ynx(0),e.YNc(1,ee,8,5,"ng-container",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.getDataProperty(n.combatPrefix+t))}}function ne(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._UZ(4,"span",6),e.qZA()(),e._UZ(5,"span",6),e.ALo(6,"noStrong"),e.qZA(),e.BQk()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("innerText",n.getDataProperty(n.passivefix+t).name),e.xp6(1),e.Q6J("innerText",e.lcZ(6,2,n.getDataProperty(n.passivefix+t).info))}}function ae(a,o){if(1&a&&(e.ynx(0),e.YNc(1,ne,7,4,"ng-container",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.getDataProperty(n.passivefix+t))}}function oe(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-card",1)(2,"div",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header"),e._UZ(7,"mat-card-title",6),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-card-content",7)(10,"mat-accordion"),e.YNc(11,X,13,10,"ng-container",8),e.YNc(12,te,2,1,"ng-container",8),e.YNc(13,ae,2,1,"ng-container",8),e.qZA()()(),e.BQk()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("innerText",e.lcZ(8,4,"CHARACTER.TALENTS")),e.xp6(4),e.Q6J("ngForOf",t.combatNum),e.xp6(1),e.Q6J("ngForOf",t.combatspNum),e.xp6(1),e.Q6J("ngForOf",t.passiveNum)}}let ie=(()=>{class a{constructor(t,n,i){this.percentPipe=t,this.decimalPipe=n,this.noCommaPipe=i,this.minLevel=1,this.maxLevel=15,this.defaultLevel=10,this.combatPrefix="combat",this.combatspPrefix="combatsp",this.passivefix="passive",this.combats=["combat1","combat2","combat3"],this.combatsps=["combatsp"],this.passives=["passive1","passive2","passive3"],this.combatNum=[1,2,3],this.combatspNum=["sp"],this.passiveNum=[1,2,3],this.props=["LEVEL","HP","ATTACK","DEFENSE"],this.props_sub=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","ELEMENTAL_MASTERY","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.percent_props=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.levelOptions=[],this.selectedLevels=[]}ngOnInit(){for(let t=this.minLevel;t<=this.maxLevel;++t)this.levelOptions.push(t);this.selectedLevels=Array.from({length:this.combatNum.length}).map((t,n)=>this.defaultLevel),this.selectedLevels.forEach((t,n)=>{this.onChangeLevel(n+1,t)})}onChangeLevel(t,n){}getDataProperty(t){return this.data.talents[t]}getTalentValue(t,n,i,l=!1){let g=n.prefix,L=[];n.valuePropKeys.forEach((C,Ee)=>{let M=this.data.talents["combat"+t].attributes.parameters[C][i-1];l||(M=n.isPercent[Ee]?this.percentPipe.transform(M,"1.0-1"):this.noCommaPipe.transform(this.decimalPipe.transform(M,"1.0-1"))),L.push(`${M}`)});let A=0,Ne=n.middles.length;for(let C=0;C<L.length;++C)g+=L[C],A<Ne&&(g+=n.middles[A++]);return g+=n.suffix,g}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.Zx),e.Y36(s.JJ),e.Y36(f.o))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-talent"]],inputs:{data:"data",dataForCal:"dataForCal"},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","expand"],["matTooltipPosition","right",3,"matTooltip"],["appearance","legacy","floatLabel","always"],[3,"ngModel","ngModelChange"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"]],template:function(t,n){1&t&&e.YNc(0,oe,14,6,"ng-container",0),2&t&&e.Q6J("ngIf",n.data.talents)},directives:[s.O5,c.a8,m.Zt,m.Bh,c.dk,c.n5,c.dn,_.pp,s.sg,_.ib,_.yz,T.gM,_.yK,x.KE,x.hX,N.gD,O.JJ,O.On,E.ey],pipes:[v.X$,U.K],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:10px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function le(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._UZ(4,"span",6),e.qZA()(),e._UZ(5,"span",6),e.ALo(6,"noStrong"),e.qZA(),e.BQk()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("innerText",n.getDataProperty(n.constellationPrefix+t).name),e.xp6(1),e.Q6J("innerText",e.lcZ(6,2,n.getDataProperty(n.constellationPrefix+t).effect))}}function re(a,o){if(1&a&&(e.ynx(0),e.YNc(1,le,7,4,"ng-container",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.getDataProperty(n.constellationPrefix+t))}}function se(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-card",1)(2,"div",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header"),e._UZ(7,"mat-card-title",6),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-card-content",7)(10,"mat-accordion"),e.YNc(11,re,2,1,"ng-container",8),e.qZA()()(),e.BQk()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("innerText",e.lcZ(8,2,"CHARACTER.CONSTELLATION")),e.xp6(4),e.Q6J("ngForOf",t.constellationNum)}}let ce=(()=>{class a{constructor(t){this.percentPipe=t,this.constellationPrefix="c",this.constellationNum=[1,2,3,4,5,6],this.props=["LEVEL","HP","ATTACK","DEFENSE"],this.props_sub=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","ELEMENTAL_MASTERY","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.percent_props=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.levelOptions=[],this.selectedLevels=[]}ngOnInit(){}getDataProperty(t){return this.data.constellations[t]}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.Zx))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-constellation"]],inputs:{data:"data",dataForCal:"dataForCal"},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","expand"]],template:function(t,n){1&t&&e.YNc(0,se,12,4,"ng-container",0),2&t&&e.Q6J("ngIf",n.data.constellations)},directives:[s.O5,c.a8,m.Zt,m.Bh,c.dk,c.n5,c.dn,_.pp,s.sg,_.ib,_.yz,_.yK],pipes:[v.X$,U.K],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:10px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();var pe=r(327);function _e(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",12),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.queryName)("innerText",t.name)}}function de(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",12),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",t)}}function ge(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",12),e.ALo(2,"number"),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",e.xi3(2,2,t.level,"1.0-0"))}}function me(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",13),e.ALo(2,"translate"),e._UZ(3,"td",14),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"rate"),e.ALo(7,"noComma"),e.ALo(8,"number"),e.ALo(9,"rate"),e.ALo(10,"rate"),e.qZA()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,e.Dn7(6,10,n.selectedLevelProps[t].value,n.getPropRate(t),n.selectedPlayerNum-1),"1.0-1")):e.lcZ(7,14,e.xi3(8,16,e.Dn7(9,19,n.selectedLevelProps[t].value,n.getPropRate(t),n.selectedPlayerNum-1),"1.0-0")))("matTooltip",e.Dn7(10,23,n.selectedLevelProps[t].value,n.getPropRate(t),n.selectedPlayerNum-1))}}function he(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",13),e.ALo(2,"translate"),e._UZ(3,"td",14),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function xe(a,o){if(1&a&&(e.ynx(0),e.YNc(1,he,8,15,"tr",15),e.BQk()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.selectedLevelProps[t])}}let Oe=(()=>{class a{constructor(t,n,i,l){this.httpService=t,this.enemyService=n,this.languageService=i,this.extraDataService=l,this.minLevel=1,this.maxLevel=100,this.defaultLevel=90,this.minPlayerNum=1,this.maxPlayerNum=4,this.hpRates=[1,1.5,2,2.5],this.attackRates=[1,1.1,1.25,1.4],this.props=["LEVEL","HP","ATTACK","DEFENSE"],this.props_sub=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","ELEMENTAL_MASTERY","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.percent_props=["HP_UP","ATTACK_UP","DEFENSE_UP","CRIT_RATE","CRIT_DMG","ENERGY_RECHARGE","HEALING_BONUS","REVERSE_HEALING_BONUS","DMG_BONUS_CRYO","DMG_BONUS_ANEMO","DMG_BONUS_PHYSICAL","DMG_BONUS_ELECTRO","DMG_BONUS_GEO","DMG_BONUS_PYRO","DMG_BONUS_HYDRO","DMG_BONUS_DENDRO","DMG_BONUS_ALL","DMG_BONUS_NORMAL","DMG_BONUS_CHARGED","DMG_BONUS_PLUNGING","DMG_BONUS_SKILL","DMG_BONUS_ELEMENTAL_BURST"],this.enemyList=[],this.levelOptions=[],this.playerNumOptions=[],this.languageService.getLang().subscribe(g=>{this.initializeEnemyList(),this.selectedEnemyKey&&(this.data=this.enemyService.get(this.selectedEnemyKey,g))})}ngOnInit(){this.initializeEnemyList();for(let t=this.minLevel;t<=this.maxLevel;++t)this.levelOptions.push({level:t});for(let t=this.minPlayerNum;t<=this.maxPlayerNum;++t)this.playerNumOptions.push(t);this.selectedEnemyKey=this.enemyList[0].queryName,this.selectedPlayerNum=this.minPlayerNum,this.selectedLevel=this.levelOptions[this.defaultLevel-1],this.onSelectEnemy(this.selectedEnemyKey)}onSelectEnemy(t){this.data=this.enemyService.get(t),this.dataForCal=this.enemyService.get(t,p.hx.QUERY_LANG),console.log(this.data),this.onChangeLevel(this.selectedLevel)}onChangeLevel(t){this.selectedLevelProps={};let n=this.dataForCal.stats(t.level);for(let i of this.props)this.selectedLevelProps[i]={isPercent:!1,value:n[i.toLowerCase()]}}getPropRate(t){return this[t.toLocaleLowerCase()+"Rates"]}initializeBackGroundImage(){this.avatarLoadFlg=!1;let t=this.data.images.nameicon;t=h.N.thirdPartyAPIHost+this.data.images.nameicon+h.N.thirdPartyAPIPicType,this.httpService.get(t,"blob").then(n=>{n&&(this.avatarURL=window.URL.createObjectURL(n),setTimeout(()=>{this.avatarLoadFlg=!0},100))}).catch(()=>{})}initializeEnemyList(t){this.enemyList=[],this.enemyService.getMap(t).forEach((n,i)=>{this.enemyList.push({queryName:i,name:n.name,specialname:n.specialname,enemyType:n.enemytype})})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.OE),e.Y36(p.z),e.Y36(p.TS),e.Y36(p.Xx))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-enemy"]],decls:35,vars:21,consts:[["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"header-text"],["appearance","legacy","floatLabel","always"],[3,"innerText"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"],[4,"ngIf"]],template:function(t,n){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1),e.O4$(),e.TgZ(3,"svg",2),e._UZ(4,"path",3)(5,"path",4),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header")(7,"mat-card-title",5)(8,"mat-form-field",6),e._UZ(9,"mat-label",7),e.ALo(10,"translate"),e.TgZ(11,"mat-select",8),e.NdJ("ngModelChange",function(l){return n.selectedEnemyKey=l})("ngModelChange",function(l){return n.onSelectEnemy(l)}),e.YNc(12,_e,2,2,"ng-container",9),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"mat-form-field",6),e._UZ(15,"mat-label",7),e.ALo(16,"translate"),e.TgZ(17,"mat-select",8),e.NdJ("ngModelChange",function(l){return n.selectedPlayerNum=l}),e.YNc(18,de,2,2,"ng-container",9),e.qZA()()()(),e.TgZ(19,"mat-card-content",10),e._UZ(20,"mat-divider"),e.TgZ(21,"mat-expansion-panel",11)(22,"mat-expansion-panel-header")(23,"mat-panel-title"),e._UZ(24,"span",7),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"mat-panel-description"),e.qZA(),e.TgZ(27,"mat-form-field",6),e._UZ(28,"mat-label",7),e.ALo(29,"translate"),e.TgZ(30,"mat-select",8),e.NdJ("ngModelChange",function(l){return n.selectedLevel=l})("ngModelChange",function(l){return n.onChangeLevel(l)}),e.YNc(31,ge,3,5,"ng-container",9),e.qZA()(),e.TgZ(32,"table"),e.YNc(33,me,11,27,"tr",9),e.YNc(34,xe,2,1,"ng-container",9),e.qZA()()()(),e.BQk()),2&t&&(e.xp6(9),e.Q6J("innerText",e.lcZ(10,13,"ENEMY.NAME")),e.xp6(2),e.Q6J("ngModel",n.selectedEnemyKey),e.xp6(1),e.Q6J("ngForOf",n.enemyList),e.xp6(3),e.Q6J("innerText",e.lcZ(16,15,"ENEMY.PLAYERNUM")),e.xp6(2),e.Q6J("ngModel",n.selectedPlayerNum),e.xp6(1),e.Q6J("ngForOf",n.playerNumOptions),e.xp6(3),e.Q6J("expanded",!0),e.xp6(3),e.Q6J("innerText",e.lcZ(25,17,"ENEMY.PROPS")),e.xp6(4),e.Q6J("innerText",e.lcZ(29,19,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",n.selectedLevel),e.xp6(1),e.Q6J("ngForOf",n.levelOptions),e.xp6(2),e.Q6J("ngForOf",n.props),e.xp6(1),e.Q6J("ngForOf",n.props_sub))},directives:[c.a8,m.Zt,m.Bh,c.dk,c.n5,x.KE,x.hX,N.gD,O.JJ,O.On,s.sg,E.ey,c.dn,P.d,_.ib,_.yz,_.yK,_.u4,T.gM,s.O5],pipes:[v.X$,s.JJ,f.o,s.Zx,pe.d],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:10px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px;border-radius:0%}.header-text[_ngcontent-%COMP%]{font-size:inherit}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function Le(a,o){if(1&a&&e._UZ(0,"div",6),2&a){const t=e.oxw();e.Udp("background-image","url("+t.backgroundURL+")"),e.Q6J("@imgLoad",t.backgroundLoadFlg?"loaded":"beforeLoad")}}const ve=[{path:"",component:(()=>{class a{constructor(t,n,i,l){this.httpService=t,this.route=n,this.characterService=i,this.languageService=l,this.otherState="beforeLoad",this.languageService.getLang().subscribe(g=>{this.data=this.characterService.get(this.currentCharacterName,g),console.log(this.data)}),setTimeout(()=>{this.otherState="loaded"},100)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.dataForCal=this.characterService.get(t.name,p.hx.QUERY_LANG),this.data=this.characterService.get(t.name),this.currentCharacterName=this.dataForCal.fullname,this.initializeBackGroundImage(),console.log(this.data)})}ngOnDestroy(){this.backgroundLoadFlg=!1,this.otherState="beforeLoad"}initializeBackGroundImage(){var t;if(!this.backgroundURL){this.backgroundLoadFlg=!1;let n=null!==(t=this.data.images.cover1)&&void 0!==t?t:this.data.images.portrait;n&&this.httpService.get(n,"blob").then(i=>{i&&(this.backgroundURL=window.URL.createObjectURL(i),setTimeout(()=>{this.backgroundLoadFlg=!0},100))}).catch(()=>{})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(p.OE),e.Y36(u.gz),e.Y36(p.AE),e.Y36(p.TS))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-main"]],decls:8,vars:9,consts:[[1,"main"],["class","background",3,"background-image",4,"ngIf"],["fxLayout","row wrap",1,"content"],[1,"float",3,"data","dataForCal"],[1,"float",3,"charWeaponType"],[1,"float"],[1,"background"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Le,1,3,"div",1),e.TgZ(2,"div",2),e._UZ(3,"app-character",3)(4,"app-weapon",4)(5,"app-talent",3)(6,"app-constellation",3)(7,"app-enemy",5),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.backgroundURL),e.xp6(1),e.Q6J("@otherLoad",n.otherState),e.xp6(1),e.Q6J("data",n.data)("dataForCal",n.dataForCal),e.xp6(1),e.Q6J("charWeaponType",n.data.weapontype),e.xp6(1),e.Q6J("data",n.data)("dataForCal",n.dataForCal),e.xp6(1),e.Q6J("data",n.data)("dataForCal",n.dataForCal))},directives:[s.O5,R.xw,J,$,ie,ce,Oe],styles:[".main[_ngcontent-%COMP%]{height:100%}.content[_ngcontent-%COMP%]{padding:6px}.background[_ngcontent-%COMP%]{position:fixed;bottom:0;background-position:right top;background-size:cover;z-index:-10;min-height:100%;width:100%}"],data:{animation:[(0,d.X$)("imgLoad",[(0,d.SB)("beforeLoad",(0,d.oB)({opacity:.01})),(0,d.SB)("loaded",(0,d.oB)({opacity:.16})),(0,d.eR)("beforeLoad=>loaded",[(0,d.jt)("1s")]),(0,d.eR)("loaded=>beforeLoad",[(0,d.jt)("0.2s")])]),(0,d.X$)("otherLoad",[(0,d.SB)("beforeLoad",(0,d.oB)({opacity:.01})),(0,d.SB)("loaded",(0,d.oB)({opacity:1})),(0,d.eR)("beforeLoad=>loaded",[(0,d.jt)("0.5s")]),(0,d.eR)("loaded=>beforeLoad",[(0,d.jt)("0.2s")])])]}}),a})()}];let Ce=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[u.Bz.forChild(ve)],u.Bz]}),a})(),Me=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[s.Zx,s.JJ,p.od,p.dG],imports:[[s.ez,D.o9,G.h,Ce,p.m8]]}),a})()}}]);