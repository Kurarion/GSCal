"use strict";(self.webpackChunkGSCal=self.webpackChunkGSCal||[]).push([[554],{5554:(ae,J,d)=>{d.r(J),d.d(J,{CharacterModule:()=>te});var s=d(9808),R=d(9764),F=d(6752),M=d(1787),m=d(1777),t=d(5e3),r=d(5218),N=d(7093),p=d(9224),x=d(3737),I=d(4834),h=d(288),_=d(7322),C=d(4107),u=d(3075),L=d(508),A=d(7238),v=d(4218),S=d(5348);function D(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",13),t.ALo(2,"number"),t.ALo(3,"translate"),t.BQk()),2&a){const e=l.$implicit;t.xp6(1),t.Q6J("value",e)("innerText",t.xi3(2,2,e.levelNum,"1.0-0")+(e.isAscend?t.lcZ(3,5,"PROPS.ASCENDED"):""))}}function B(a,l){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",14),t.ALo(2,"translate"),t._UZ(3,"td",15),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"noComma"),t.ALo(7,"number"),t.qZA()),2&a){const e=l.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,n.selectedLevelProps[e].value,"1.0-1")):t.lcZ(6,10,t.xi3(7,12,n.selectedLevelProps[e].value,"1.0-0")))("matTooltip",n.selectedLevelProps[e].value)}}function H(a,l){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",14),t.ALo(2,"translate"),t._UZ(3,"td",15),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"noComma"),t.ALo(7,"number"),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,n.selectedLevelProps[e].value,"1.0-1")):t.lcZ(6,10,t.xi3(7,12,n.selectedLevelProps[e].value,"1.0-0")))("matTooltip",n.selectedLevelProps[e].value)}}function Y(a,l){if(1&a&&(t.ynx(0),t.YNc(1,H,8,15,"tr",0),t.BQk()),2&a){const e=l.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.selectedLevelProps[e]&&0!=n.selectedLevelProps[e].value)}}function z(a,l){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-card",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"div",6),t.TgZ(8,"mat-card-title"),t._uU(9),t.qZA()(),t.TgZ(10,"mat-card-content",7),t._UZ(11,"mat-divider"),t.TgZ(12,"mat-expansion-panel",8)(13,"mat-expansion-panel-header")(14,"mat-panel-title"),t._UZ(15,"span",9),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"mat-panel-description"),t.qZA(),t.TgZ(18,"mat-form-field",10),t._UZ(19,"mat-label",9),t.ALo(20,"translate"),t.TgZ(21,"mat-select",11),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().selectedLevel=i})("ngModelChange",function(i){return t.CHM(e),t.oxw().onChangeLevel(i)}),t.YNc(22,D,4,7,"ng-container",12),t.qZA()(),t.TgZ(23,"table"),t.YNc(24,B,8,15,"tr",12),t.YNc(25,Y,2,1,"ng-container",12),t.qZA()()()(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(7),t.Udp("background-image",e.avatarLoadFlg?"url("+e.avatarURL+")":""),t.xp6(2),t.Oqu(e.data.name[e.currentLanguage]),t.xp6(3),t.Q6J("expanded",!0),t.xp6(3),t.Q6J("innerText",t.lcZ(16,10,"CHARACTER.PROPS")),t.xp6(4),t.Q6J("innerText",t.lcZ(20,12,"PROPS.LEVEL")),t.xp6(2),t.Q6J("ngModel",e.selectedLevel),t.xp6(1),t.Q6J("ngForOf",e.levelOptions),t.xp6(2),t.Q6J("ngForOf",e.props),t.xp6(1),t.Q6J("ngForOf",e.props_sub)}}let W=(()=>{class a{constructor(e,n,i,o){this.httpService=e,this.extraDataService=n,this.characterService=i,this.calculatorService=o,this.minLevel=1,this.maxLevel=90,this.ascendLevels=[20,40,50,60,70,80,90],this.levelPadNum=2,this.props=r.hx.PROPS_CHARA_ENEMY_BASE,this.props_sub=r.hx.PROPS_CHARA_WEAPON_SUB,this.percent_props=r.hx.PROPS_CHARA_WEAPON_PERCENT,this.levelOptions=[]}ngOnInit(){var e;this.initializeBackGroundImage();for(let n=this.minLevel;n<=this.maxLevel;++n)this.levelOptions.push({level:n.toString().padStart(this.levelPadNum,"0"),levelNum:n}),this.ascendLevels.includes(n)&&n!=this.maxLevel&&this.levelOptions.push({level:n.toString().padStart(this.levelPadNum,"0")+"+",levelNum:n,isAscend:!0});this.selectedLevel=null!==(e=this.getLevelFromString(this.characterService.getLevel(this.data.id)))&&void 0!==e?e:this.levelOptions[this.levelOptions.length-1],this.onChangeLevel(this.selectedLevel)}ngOnDestroy(){this.characterService.saveData()}onChangeLevel(e){this.selectedLevelProps={};let n=this.data.levelMap[e.level];for(let i in n){let o=i.toUpperCase();this.selectedLevelProps[o]={isPercent:this.percent_props.includes(o),value:n[i]}}this.characterService.setLevel(this.data.id,e.level),this.calculatorService.setDirtyFlag(this.data.id)}initializeBackGroundImage(){this.avatarURL||(this.avatarLoadFlg=!1,this.httpService.get(this.data.images.icon,"blob").then(n=>{n&&(this.avatarURL=window.URL.createObjectURL(n),setTimeout(()=>{this.avatarLoadFlg=!0},100))}).catch(()=>{}))}getLevelFromString(e){if(!e)return;let n=parseInt(e),i=e.includes("+"),o=-1;for(let g=0;g<this.ascendLevels.length&&this.ascendLevels[g]<n;++g)++o;return this.levelOptions[o+(i?1:0)+n]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(r.OE),t.Y36(r.Xx),t.Y36(r.AE),t.Y36(r.RO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-character"]],hostBindings:function(e,n){1&e&&t.NdJ("unload",function(){return n.ngOnDestroy()},!1,t.Jf7)},inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["mat-card-avatar","",1,"avatar"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[3,"innerText"],["appearance","legacy","floatLabel","always"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"]],template:function(e,n){1&e&&t.YNc(0,z,26,14,"ng-container",0),2&e&&t.Q6J("ngIf",n.data)},directives:[s.O5,p.a8,x.Zt,x.Bh,p.dk,p.kc,p.n5,p.dn,I.d,h.ib,h.yz,h.yK,h.u4,_.KE,_.hX,C.gD,u.JJ,u.On,s.sg,L.ey,A.gM],pipes:[v.X$,s.JJ,S.o,s.Zx],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();var q=d(327);function $(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",12),t.BQk()),2&a){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("value",e.index)("innerText",e.names[n.currentLanguage])}}function V(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",12),t.BQk()),2&a){const e=l.$implicit;t.xp6(1),t.Q6J("value",e)("innerText",e)}}function X(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",12),t.ALo(2,"number"),t.BQk()),2&a){const e=l.$implicit;t.xp6(1),t.Q6J("value",e)("innerText",t.xi3(2,2,e.level,"1.0-0"))}}function K(a,l){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",13),t.ALo(2,"translate"),t._UZ(3,"td",14),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"rate"),t.ALo(7,"noComma"),t.ALo(8,"number"),t.ALo(9,"rate"),t.ALo(10,"rate"),t.qZA()),2&a){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,t.Dn7(6,10,n.selectedLevelProps[e].value,n.getPropRate(e),n.selectedPlayerNum-1),"1.0-1")):t.lcZ(7,14,t.xi3(8,16,t.Dn7(9,19,n.selectedLevelProps[e].value,n.getPropRate(e),n.selectedPlayerNum-1),"1.0-0")))("matTooltip",t.Dn7(10,23,n.selectedLevelProps[e].value,n.getPropRate(e),n.selectedPlayerNum-1))}}function G(a,l){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",13),t.ALo(2,"translate"),t._UZ(3,"td",14),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"noComma"),t.ALo(7,"number"),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,n.selectedLevelProps[e].value,"1.0-1")):t.lcZ(6,10,t.xi3(7,12,n.selectedLevelProps[e].value,"1.0-0")))("matTooltip",n.selectedLevelProps[e].value)}}function j(a,l){if(1&a&&(t.ynx(0),t.YNc(1,G,8,15,"tr",15),t.BQk()),2&a){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.selectedLevelProps[e])}}let tt=(()=>{class a{constructor(e,n,i,o){this.httpService=e,this.enemyService=n,this.calculatorService=i,this.extraDataService=o,this.minLevel=1,this.maxLevel=100,this.defaultLevel=90,this.minPlayerNum=1,this.maxPlayerNum=4,this.hpRates=[1,1.5,2,2.5],this.attackRates=[1,1.1,1.25,1.4],this.levelPadNum=3,this.props=r.hx.PROPS_CHARA_ENEMY_BASE,this.props_sub=r.hx.PROPS_ENEMY_SUB,this.percent_props=r.hx.PROPS_ENEMY_PERCENT,this.enemyList=[],this.levelOptions=[],this.playerNumOptions=[]}ngOnInit(){var e,n,i;this.initializeEnemyList();for(let o=this.minLevel;o<=this.maxLevel;++o)this.levelOptions.push({level:o.toString().padStart(this.levelPadNum,"0"),levelNum:o});for(let o=this.minPlayerNum;o<=this.maxPlayerNum;++o)this.playerNumOptions.push(o);this.selectedEnemyIndex=null!==(e=this.enemyService.getIndex(this.data.id))&&void 0!==e?e:this.enemyList[0].index,this.selectedPlayerNum=null!==(n=this.getPlayerNumFromNumber(this.enemyService.getPlayerNum(this.data.id)))&&void 0!==n?n:this.minPlayerNum,this.selectedLevel=null!==(i=this.getLevelFromString(this.enemyService.getLevel(this.data.id)))&&void 0!==i?i:this.levelOptions[this.defaultLevel-1],this.onSelectEnemy(this.selectedEnemyIndex),this.onChangeLevel(this.selectedLevel),this.onChangePlayerNum(this.selectedPlayerNum)}ngOnDestroy(){this.enemyService.saveData()}onSelectEnemy(e){this.enemyData=this.enemyService.get(e),console.log(this.enemyData),this.calculatorService.initEnemyData(this.data.id,e),this.enemyService.setIndex(this.data.id,this.enemyData.id),this.onChangeLevel(this.selectedLevel)}onChangeLevel(e){this.selectedLevelProps={};let n=this.enemyData.levelMap[e.level];for(let i in n){let o=i.toUpperCase();this.selectedLevelProps[o]={isPercent:this.percent_props.includes(o),value:n[i]}}this.enemyService.setLevel(this.data.id,e.level),this.calculatorService.setDirtyFlag(this.data.id)}onChangePlayerNum(e){this.enemyService.setPlayerNum(this.data.id,e)}getPropRate(e){return this[e.toLocaleLowerCase()+"Rates"]}initializeBackGroundImage(){this.avatarLoadFlg=!1,this.httpService.get(this.enemyData.images.icon,"blob").then(n=>{n&&(this.avatarURL=window.URL.createObjectURL(n),setTimeout(()=>{this.avatarLoadFlg=!0},100))}).catch(()=>{})}initializeEnemyList(e){this.enemyList=[];let n=this.enemyService.getMap();for(let i in n)this.enemyList.push({index:i,names:n[i].name,codeName:n[i].monsterName,enemyType:n[i].type})}getLevelFromString(e){if(e)return this.levelOptions[parseInt(e)-1]}getPlayerNumFromNumber(e){if(e)return e}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(r.OE),t.Y36(r.z),t.Y36(r.RO),t.Y36(r.Xx))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-enemy"]],hostBindings:function(e,n){1&e&&t.NdJ("unload",function(){return n.ngOnDestroy()},!1,t.Jf7)},inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:35,vars:21,consts:[["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"header-text"],["appearance","legacy","floatLabel","always"],[3,"innerText"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"],[4,"ngIf"]],template:function(e,n){1&e&&(t.ynx(0),t.TgZ(1,"mat-card",0)(2,"div",1),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"path",3)(5,"path",4),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header")(7,"mat-card-title",5)(8,"mat-form-field",6),t._UZ(9,"mat-label",7),t.ALo(10,"translate"),t.TgZ(11,"mat-select",8),t.NdJ("ngModelChange",function(o){return n.selectedEnemyIndex=o})("ngModelChange",function(o){return n.onSelectEnemy(o)}),t.YNc(12,$,2,2,"ng-container",9),t.qZA()(),t._UZ(13,"br"),t.TgZ(14,"mat-form-field",6),t._UZ(15,"mat-label",7),t.ALo(16,"translate"),t.TgZ(17,"mat-select",8),t.NdJ("ngModelChange",function(o){return n.selectedPlayerNum=o})("ngModelChange",function(o){return n.onChangePlayerNum(o)}),t.YNc(18,V,2,2,"ng-container",9),t.qZA()()()(),t.TgZ(19,"mat-card-content",10),t._UZ(20,"mat-divider"),t.TgZ(21,"mat-expansion-panel",11)(22,"mat-expansion-panel-header")(23,"mat-panel-title"),t._UZ(24,"span",7),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"mat-panel-description"),t.qZA(),t.TgZ(27,"mat-form-field",6),t._UZ(28,"mat-label",7),t.ALo(29,"translate"),t.TgZ(30,"mat-select",8),t.NdJ("ngModelChange",function(o){return n.selectedLevel=o})("ngModelChange",function(o){return n.onChangeLevel(o)}),t.YNc(31,X,3,5,"ng-container",9),t.qZA()(),t.TgZ(32,"table"),t.YNc(33,K,11,27,"tr",9),t.YNc(34,j,2,1,"ng-container",9),t.qZA()()()(),t.BQk()),2&e&&(t.xp6(9),t.Q6J("innerText",t.lcZ(10,13,"ENEMY.NAME")),t.xp6(2),t.Q6J("ngModel",n.selectedEnemyIndex),t.xp6(1),t.Q6J("ngForOf",n.enemyList),t.xp6(3),t.Q6J("innerText",t.lcZ(16,15,"ENEMY.PLAYERNUM")),t.xp6(2),t.Q6J("ngModel",n.selectedPlayerNum),t.xp6(1),t.Q6J("ngForOf",n.playerNumOptions),t.xp6(3),t.Q6J("expanded",!0),t.xp6(3),t.Q6J("innerText",t.lcZ(25,17,"ENEMY.PROPS")),t.xp6(4),t.Q6J("innerText",t.lcZ(29,19,"PROPS.LEVEL")),t.xp6(2),t.Q6J("ngModel",n.selectedLevel),t.xp6(1),t.Q6J("ngForOf",n.levelOptions),t.xp6(2),t.Q6J("ngForOf",n.props),t.xp6(1),t.Q6J("ngForOf",n.props_sub))},directives:[p.a8,x.Zt,x.Bh,p.dk,p.n5,_.KE,_.hX,C.gD,u.JJ,u.On,s.sg,L.ey,p.dn,I.d,h.ib,h.yz,h.yK,h.u4,A.gM,s.O5],pipes:[v.X$,s.JJ,S.o,s.Zx,q.d],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-top:10px;margin-bottom:5px;border-radius:0%}.header-text[_ngcontent-%COMP%]{font-size:inherit}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();var Z=d(24);function et(a,l){if(1&a&&t._UZ(0,"mat-option",15),2&a){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("value",e.index)("innerText",e.names[n.currentLanguage])}}function nt(a,l){if(1&a&&(t.ynx(0),t.YNc(1,et,1,2,"mat-option",14),t.BQk()),2&a){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",e.weaponType==n.charWeaponType)}}function at(a,l){if(1&a&&(t._UZ(0,"mat-option",15),t.ALo(1,"number"),t.ALo(2,"translate")),2&a){const e=t.oxw().$implicit;t.Q6J("value",e)("innerText",t.xi3(1,2,e.levelNum,"1.0-0")+(e.isAscend?t.lcZ(2,5,"PROPS.ASCENDED"):""))}}function it(a,l){if(1&a&&(t.ynx(0),t.YNc(1,at,3,7,"mat-option",14),t.BQk()),2&a){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",e.levelNum<n.selectedWeaponAbleMaxLevel||e.levelNum==n.selectedWeaponAbleMaxLevel&&!e.isAscend)}}function ot(a,l){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",16),t.ALo(2,"translate"),t._UZ(3,"td",17),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"noComma"),t.ALo(7,"number"),t.qZA()),2&a){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,n.selectedLevelProps[e].value,"1.0-1")):t.lcZ(6,10,t.xi3(7,12,n.selectedLevelProps[e].value,"1.0-0")))("matTooltip",n.selectedLevelProps[e].value)}}function lt(a,l){if(1&a&&(t.TgZ(0,"tr"),t._UZ(1,"td",16),t.ALo(2,"translate"),t._UZ(3,"td",17),t.ALo(4,"noComma"),t.ALo(5,"percent"),t.ALo(6,"noComma"),t.ALo(7,"number"),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e)),t.xp6(2),t.Q6J("innerText",n.selectedLevelProps[e].isPercent?t.lcZ(4,5,t.xi3(5,7,n.selectedLevelProps[e].value,"1.0-1")):t.lcZ(6,10,t.xi3(7,12,n.selectedLevelProps[e].value,"1.0-0")))("matTooltip",n.selectedLevelProps[e].value)}}function rt(a,l){if(1&a&&(t.ynx(0),t.YNc(1,lt,8,15,"tr",13),t.BQk()),2&a){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.selectedLevelProps[e]&&0!=n.selectedLevelProps[e].value)}}function st(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",15),t.BQk()),2&a){const e=l.$implicit;t.xp6(1),t.Q6J("value",e)("innerText",e)}}function ct(a,l){if(1&a){const e=t.EpF();t.ynx(0),t._UZ(1,"mat-divider"),t.TgZ(2,"mat-expansion-panel",12)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),t._UZ(5,"span",8),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"mat-panel-description"),t.qZA(),t.TgZ(8,"mat-form-field",7),t._UZ(9,"mat-label",8),t.ALo(10,"translate"),t.TgZ(11,"mat-select",9),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().selectedSmeltingLevel=i})("ngModelChange",function(i){return t.CHM(e),t.oxw().onChangeSmeltingLevel(i)}),t.YNc(12,st,2,2,"ng-container",10),t.qZA()(),t.TgZ(13,"div")(14,"span")(15,"strong"),t._uU(16),t.qZA()(),t._UZ(17,"br")(18,"span",18),t.TgZ(19,"app-extra-data",19),t._UZ(20,"br")(21,"br"),t.qZA()()(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(2),t.Q6J("expanded",!0),t.xp6(3),t.Q6J("innerText",t.lcZ(6,10,"WEAPON.SMELTING")),t.xp6(4),t.Q6J("innerText",t.lcZ(10,12,"PROPS.LEVEL")),t.xp6(2),t.Q6J("ngModel",e.selectedSmeltingLevel),t.xp6(1),t.Q6J("ngForOf",e.smeltingLevelOptions),t.xp6(4),t.Oqu(e.getEffectName(e.selectedSmeltingLevel)[e.currentLanguage]),t.xp6(2),t.Q6J("innerHTML",e.getEffectContent(e.selectedSmeltingLevel)[e.currentLanguage],t.oJD),t.xp6(1),t.Q6J("characterIndex",e.data.id)("skill",e.name_effect)("valueIndexs",e.getEffectValidIndexs(e.selectedSmeltingLevel))}}let pt=(()=>{class a{constructor(e,n,i,o){this.httpService=e,this.weaponService=n,this.calculatorService=i,this.extraDataService=o,this.notExitLevel=-1,this.minLevel=1,this.maxLevel=90,this.minSmeltingLevel=1,this.maxSmeltingLevel=5,this.defaultSmeltingLevel=this.minSmeltingLevel.toString(),this.ascendLevels=[20,40,50,60,70,80,90],this.ascendLevelsMap={5:6,4:6,3:6,2:4,1:4},this.levelPadNum=2,this.smeltingLevelPadNum=1,this.name_effect=r.hx.NAME_EFFECT,this.props=r.hx.PROPS_WEAPON_BASE,this.props_sub=r.hx.PROPS_CHARA_WEAPON_SUB,this.percent_props=r.hx.PROPS_CHARA_WEAPON_PERCENT,this.weaponList=[],this.levelOptions=[],this.smeltingLevelOptions=[]}ngOnInit(){var e,n;this.charWeaponType=this.data.weaponType,this.initializeWeaponList();for(let o=this.minLevel;o<=this.maxLevel;++o)this.levelOptions.push({level:o.toString().padStart(this.levelPadNum,"0"),levelNum:o}),this.ascendLevels.includes(o)&&o!=this.maxLevel&&this.levelOptions.push({level:o.toString().padStart(this.levelPadNum,"0")+"+",levelNum:o,isAscend:!0});for(let o=this.minSmeltingLevel;o<=this.maxSmeltingLevel;++o)this.smeltingLevelOptions.push(o.toString().padStart(this.smeltingLevelPadNum,"0"));let i=this.weaponService.getIndex(this.data.id);if(i)this.selectedWeaponIndex=i;else for(let o=1;o<this.weaponList.length;++o)if(this.weaponList[o].weaponType==this.charWeaponType&&this.weaponList[o].rankLevel==this.maxSmeltingLevel){this.selectedWeaponIndex=this.weaponList[o].index;break}this.selectedLevel=null!==(e=this.getLevelFromString(this.weaponService.getLevel(this.data.id)))&&void 0!==e?e:this.levelOptions[this.levelOptions.length-1],this.selectedSmeltingLevel=null!==(n=this.getSmeltingLevelFromString(this.weaponService.getSmeltingLevel(this.data.id)))&&void 0!==n?n:this.defaultSmeltingLevel,this.onSelectWeapon(this.selectedWeaponIndex),this.onChangeLevel(this.selectedLevel),this.onChangeSmeltingLevel(this.selectedSmeltingLevel)}ngOnDestroy(){this.weaponService.saveData()}onSelectWeapon(e){var n;let i=this.notExitLevel;this.weaponData&&(i=this.ascendLevels[this.ascendLevelsMap[this.weaponData.rankLevel]],this.weaponService.clearExtraData(this.data.id)),this.weaponData=this.weaponService.get(e),this.weaponService.setDefaultExtraData(this.data.id,e),this.calculatorService.initWeaponData(this.data.id,e),console.log(this.weaponData),this.selectedWeaponAbleMaxLevel=this.ascendLevels[this.ascendLevelsMap[this.weaponData.rankLevel]],(i==this.notExitLevel||i==this.selectedLevel.levelNum||this.selectedLevel.levelNum>this.selectedWeaponAbleMaxLevel)&&(this.selectedLevel=null!==(n=this.getLevelFromString(this.weaponService.getLevel(this.data.id)))&&void 0!==n?n:this.levelOptions[this.selectedWeaponAbleMaxLevel+this.ascendLevels.indexOf(this.selectedWeaponAbleMaxLevel)-1],this.onChangeLevel(this.selectedLevel)),this.initializeBackGroundImage(),this.weaponService.setIndex(this.data.id,this.weaponData.id)}onChangeLevel(e){this.selectedLevelProps={};let n=this.weaponData.levelMap[e.level];for(let i in n){let o=i.toUpperCase();this.selectedLevelProps[o]={isPercent:this.percent_props.includes(o),value:n[i]}}this.weaponService.setLevel(this.data.id,e.level),this.calculatorService.setDirtyFlag(this.data.id)}onChangeSmeltingLevel(e){this.weaponService.setSmeltingLevel(this.data.id,e),this.calculatorService.initExtraWeaponData(this.data.id)}getEffectName(e){return this.weaponData.skillAffixMap[e].name}getEffectContent(e){return this.weaponData.skillAffixMap[e].desc}getEffectValidIndexs(e){return this.weaponData.skillAffixMap[e].paramValidIndexs}initializeBackGroundImage(){this.avatarLoadFlg=!1,this.httpService.get(this.weaponData.images.icon,"blob").then(n=>{n&&(this.avatarURL=window.URL.createObjectURL(n),setTimeout(()=>{this.avatarLoadFlg=!0},100))}).catch(()=>{})}initializeWeaponList(){this.weaponList=[];let e=this.weaponService.getMap();for(let n in e)this.weaponList.push({index:n,names:e[n].name,rankLevel:e[n].rankLevel,weaponType:e[n].weaponType})}getLevelFromString(e){if(!e)return;let n=parseInt(e),i=e.includes("+"),o=-1;for(let g=0;g<this.ascendLevels.length&&this.ascendLevels[g]<n;++g)++o;return this.levelOptions[o+(i?1:0)+n]}getSmeltingLevelFromString(e){if(e)return e}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(r.OE),t.Y36(r.kv),t.Y36(r.RO),t.Y36(r.Xx))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-weapon"]],hostBindings:function(e,n){1&e&&t.NdJ("unload",function(){return n.ngOnDestroy()},!1,t.Jf7)},inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:31,vars:19,consts:[["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["mat-card-avatar","",1,"avatar"],[1,"header-text"],["appearance","legacy","floatLabel","always"],[3,"innerText"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[4,"ngIf"],[3,"value","innerText",4,"ngIf"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"],[3,"innerHTML"],[3,"characterIndex","skill","valueIndexs"]],template:function(e,n){1&e&&(t.ynx(0),t.TgZ(1,"mat-card",0)(2,"div",1),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"path",3)(5,"path",4),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"div",5),t.TgZ(8,"mat-card-title",6)(9,"mat-form-field",7),t._UZ(10,"mat-label",8),t.ALo(11,"translate"),t.TgZ(12,"mat-select",9),t.NdJ("ngModelChange",function(o){return n.selectedWeaponIndex=o})("ngModelChange",function(o){return n.onSelectWeapon(o)}),t.YNc(13,nt,2,1,"ng-container",10),t.qZA()()()(),t.TgZ(14,"mat-card-content",11),t._UZ(15,"mat-divider"),t.TgZ(16,"mat-expansion-panel",12)(17,"mat-expansion-panel-header")(18,"mat-panel-title"),t._UZ(19,"span",8),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"mat-panel-description"),t.qZA(),t.TgZ(22,"mat-form-field",7),t._UZ(23,"mat-label",8),t.ALo(24,"translate"),t.TgZ(25,"mat-select",9),t.NdJ("ngModelChange",function(o){return n.selectedLevel=o})("ngModelChange",function(o){return n.onChangeLevel(o)}),t.YNc(26,it,2,1,"ng-container",10),t.qZA()(),t.TgZ(27,"table"),t.YNc(28,ot,8,15,"tr",10),t.YNc(29,rt,2,1,"ng-container",10),t.qZA()(),t.YNc(30,ct,22,14,"ng-container",13),t.qZA()(),t.BQk()),2&e&&(t.xp6(7),t.Udp("background-image",n.avatarLoadFlg?"url("+n.avatarURL+")":""),t.xp6(3),t.Q6J("innerText",t.lcZ(11,13,"WEAPON.NAME")),t.xp6(2),t.Q6J("ngModel",n.selectedWeaponIndex),t.xp6(1),t.Q6J("ngForOf",n.weaponList),t.xp6(3),t.Q6J("expanded",!0),t.xp6(3),t.Q6J("innerText",t.lcZ(20,15,"WEAPON.PROPS")),t.xp6(4),t.Q6J("innerText",t.lcZ(24,17,"PROPS.LEVEL")),t.xp6(2),t.Q6J("ngModel",n.selectedLevel),t.xp6(1),t.Q6J("ngForOf",n.levelOptions),t.xp6(2),t.Q6J("ngForOf",n.props),t.xp6(1),t.Q6J("ngForOf",n.props_sub),t.xp6(1),t.Q6J("ngIf",n.weaponData.skillAffixMap))},directives:[p.a8,x.Zt,x.Bh,p.dk,p.kc,p.n5,_.KE,_.hX,C.gD,u.JJ,u.On,s.sg,s.O5,L.ey,p.dn,I.d,h.ib,h.yz,h.yK,h.u4,A.gM,Z.f],pipes:[v.X$,s.JJ,S.o,s.Zx],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px;border-radius:0%}.header-text[_ngcontent-%COMP%]{font-size:inherit}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();var w=d(2340),b=d(3251),dt=d(8029);function gt(a,l){if(1&a&&(t.TgZ(0,"mat-option",5),t._UZ(1,"span",2),t.ALo(2,"translate"),t._uU(3," - "),t._UZ(4,"span",2),t.ALo(5,"noComma"),t.ALo(6,"percent"),t.ALo(7,"noComma"),t.ALo(8,"number"),t.qZA()),2&a){const e=l.$implicit;t.Q6J("value",e.name),t.xp6(1),t.Q6J("innerText",t.lcZ(2,3,"PROPS."+e.name.toUpperCase())),t.xp6(3),t.Q6J("innerText",e.isPercent?t.lcZ(5,5,t.xi3(6,7,e.value,"1.0-1")):t.lcZ(7,10,t.xi3(8,12,e.value,"1.0-0")))}}function ht(a,l){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",1),t._UZ(2,"mat-label",2),t.ALo(3,"translate"),t.TgZ(4,"mat-select",3),t.NdJ("selectionChange",function(i){const c=t.CHM(e).$implicit;return t.oxw().onSelect(c,i.value)}),t._UZ(5,"mat-option"),t.YNc(6,gt,9,15,"mat-option",4),t.qZA()(),t._UZ(7,"br"),t.BQk()}if(2&a){const e=l.$implicit,n=t.oxw();t.xp6(2),t.Q6J("innerText",t.lcZ(3,3,"ARTIFACT."+e)),t.xp6(2),t.Q6J("value",n.data[e.toLowerCase()].name),t.xp6(2),t.Q6J("ngForOf",n.mainList)}}function mt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-option",5),t._UZ(2,"span",2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.Q6J("innerText",t.lcZ(3,2,"PROPS."+e.toUpperCase()))}}function _t(a,l){if(1&a&&(t.ynx(0),t.YNc(1,mt,4,4,"ng-container",9),t.BQk()),2&a){const e=l.$implicit,n=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",!i.isDuplicate(n.toLowerCase(),e))}}function xt(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-form-field",6),t._UZ(3,"mat-label",2),t.ALo(4,"translate"),t.TgZ(5,"mat-select",3),t.NdJ("selectionChange",function(i){const c=t.CHM(e).$implicit;return t.oxw().onSelect(c,i.value)}),t._UZ(6,"mat-option"),t.YNc(7,_t,2,1,"ng-container",0),t.qZA()()(),t.TgZ(8,"td")(9,"mat-slider",7),t.NdJ("change",function(i){const c=t.CHM(e).$implicit,g=t.oxw();return g.onChangeSubSlider(i,c,g.data[c.toLowerCase()].name)}),t.qZA(),t._UZ(10,"span",8),t.ALo(11,"noComma"),t.ALo(12,"percent"),t.ALo(13,"noComma"),t.ALo(14,"number"),t.qZA()()}if(2&a){const e=l.$implicit,n=t.oxw();let i,o;t.xp6(3),t.Q6J("innerText",t.lcZ(4,8,"ARTIFACT."+e)),t.xp6(2),t.Q6J("value",n.data[e.toLowerCase()].name),t.xp6(2),t.Q6J("ngForOf",n.subList),t.xp6(2),t.Q6J("thumbLabel",!0)("value",n.data[e.toLowerCase()].name?n.dataReliquaryAffix[n.data[e.toLowerCase()].name].indexOf(n.data[e.toLowerCase()].value):0)("disabled",!n.data[e.toLowerCase()].name),t.xp6(1),t.Q6J("innerText",n.percent_props.includes(null!==(i=n.data[e.toLowerCase()].name)&&void 0!==i?i:"")?t.lcZ(11,10,t.xi3(12,12,null!==(i=n.data[e.toLowerCase()].value)&&void 0!==i?i:0,"1.0-1")):t.lcZ(13,15,t.xi3(14,17,null!==(i=n.data[e.toLowerCase()].value)&&void 0!==i?i:0,"1.0-0")))("matTooltip",(null!==(o=n.data[e.toLowerCase()].value)&&void 0!==o?o:0).toString())}}let ut=(()=>{class a{constructor(e,n,i,o){this.genshinDataService=e,this.artifactService=n,this.calculatorService=i,this.percentPipe=o,this.percent_props=r.hx.PROPS_CHARA_WEAPON_PERCENT,this.mains=[r.hx.ARTIFACT_MAIN],this.subs=[r.hx.ARTIFACT_SUB1,r.hx.ARTIFACT_SUB2,r.hx.ARTIFACT_SUB3,r.hx.ARTIFACT_SUB4],this.dataReliquaryAffix=r.br.dataReliquaryAffix,this.displayWith=c=>this.percentPipe.transform(c,"1.0-1")}ngOnInit(){this.initList(),this.initData()}ngOnChanges(e){e.index&&this.initData()}ngOnDestroy(){this.artifactService.saveData()}initList(){this.mainList=[];let n,e=r.br.dataReliquaryMain;switch(this.artifactType){case r.hx.ARTIFACT_FLOWER:n=r.hx.PROPS_ARTIFACT_FLOWER;break;case r.hx.ARTIFACT_PLUME:n=r.hx.PROPS_ARTIFACT_PLUME;break;case r.hx.ARTIFACT_SANDS:n=r.hx.PROPS_ARTIFACT_SANDS;break;case r.hx.ARTIFACT_GOBLET:n=r.hx.PROPS_ARTIFACT_GOBLET;break;case r.hx.ARTIFACT_CIRCLET:n=r.hx.PROPS_ARTIFACT_CIRCLET}for(let i of n)if(e.hasOwnProperty(i)){let o=this.percent_props.includes(i);this.mainList.push({name:i,value:e[i],isPercent:o})}this.subList=[];for(let i of r.hx.PROPS_ARTIFACT_SUB)this.subList.push(i)}initData(){this.data=this.artifactService.getStorageInfo(this.characterIndex,this.index,this.artifactType.toLowerCase())}isDuplicate(e,n){for(let i in this.data)if(e!=i&&this.data[i].name==n)return!0;return!1}onSelect(e,n){let i=e.toLowerCase();null==this.data[i]&&(this.data[i]={});for(let o in this.data)o!=e&&this.data[o].name==n&&(this.data[o].name=void 0,this.data[o].value=0);if(this.data[i].name=n,r.hx.ARTIFACT_MAIN==e){for(let o of this.mainList)if(o.name==n){this.data[i].value=o.value;break}}else this.data[i].value=0;this.calculatorService.setDirtyFlag(this.characterIndex)}onChangeSubSlider(e,n,i){var o;let c=n.toLowerCase();null==this.data[c]||!this.data[c].name||(this.data[c].value=this.dataReliquaryAffix[i][null!==(o=e.value)&&void 0!==o?o:0],this.calculatorService.setDirtyFlag(this.characterIndex))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(r.br),t.Y36(r.bk),t.Y36(r.RO),t.Y36(s.Zx))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-artifact-sub"]],hostBindings:function(e,n){1&e&&t.NdJ("unload",function(){return n.ngOnDestroy()},!1,t.Jf7)},inputs:{characterIndex:"characterIndex",index:"index",artifactType:"artifactType"},features:[t.TTD],decls:3,vars:2,consts:[[4,"ngFor","ngForOf"],["appearance","legacy","floatLabel","always"],[3,"innerText"],[3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["appearance","legacy","floatLabel","always",1,"sub-field"],["color","primary","max","69","min","0","step","1","tickInterval","auto",3,"thumbLabel","value","disabled","change"],["matTooltipPosition","right",1,"sub-span",3,"innerText","matTooltip"],[4,"ngIf"]],template:function(e,n){1&e&&(t.YNc(0,ht,8,5,"ng-container",0),t.TgZ(1,"table"),t.YNc(2,xt,15,20,"tr",0),t.qZA()),2&e&&(t.Q6J("ngForOf",n.mains),t.xp6(2),t.Q6J("ngForOf",n.subs))},directives:[s.sg,_.KE,_.hX,C.gD,L.ey,s.O5,dt.pH,A.gM],pipes:[v.X$,S.o,s.Zx,s.JJ],styles:[".sub-field[_ngcontent-%COMP%]{width:140px}.sub-span[_ngcontent-%COMP%]{display:inline-block;text-align:left;width:27px}table[_ngcontent-%COMP%]{width:96%;border-collapse:collapse}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(1){text-align:left}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-of-type(2){text-align:right}"]}),a})();var Q=d(7423),y=d(2181),k=d(5245);function ft(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",20),t.BQk()),2&a){const e=l.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("value",e.setId)("innerText",e.setName[n.currentLanguage])}}function vt(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",20),t.BQk()),2&a){const e=l.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("value",e.setId)("innerText",e.setName[n.currentLanguage])}}function Ct(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"br")(2,"span",21),t.BQk()),2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("innerHTML",e.effectContent1,t.oJD)}}function Lt(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"br")(2,"span",21),t.BQk()),2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("innerHTML",e.effectContent2,t.oJD)}}function Tt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-tab",11),t.ALo(2,"translate"),t.TgZ(3,"div",23),t._UZ(4,"br")(5,"app-artifact-sub",24),t.qZA()(),t.BQk()),2&a){const e=l.$implicit,n=t.oxw(2).index,i=t.oxw();t.xp6(1),t.Q6J("label",t.lcZ(2,4,"ARTIFACT."+e)),t.xp6(4),t.Q6J("characterIndex",i.data.id)("index",n)("artifactType",e)}}function At(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"button",25)(1,"mat-icon"),t._uU(2,"more_vert"),t.qZA()(),t.TgZ(3,"mat-menu",null,26)(5,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).index;return t.oxw().removeTab(i)}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t._UZ(8,"span",5),t.ALo(9,"translate"),t.qZA()()}if(2&a){const e=t.MAs(4),n=t.oxw(3);t.Q6J("matMenuTriggerFor",e),t.xp6(5),t.Q6J("disabled",n.tabs.length<2),t.xp6(3),t.Q6J("innerText",t.lcZ(9,3,"SYS.DELETE"))}}function bt(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"mat-tab-group",22),t.NdJ("selectedIndexChange",function(i){return t.CHM(e),t.oxw(2).partIndex=i}),t.YNc(1,Tt,6,6,"ng-container",16),t.TgZ(2,"mat-tab",9),t.YNc(3,At,10,5,"ng-template",10),t.qZA()()}if(2&a){const e=t.oxw(2);t.Q6J("selectedIndex",e.partIndex),t.xp6(1),t.Q6J("ngForOf",e.artifactList)}}function St(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"mat-tab",11)(1,"div",12),t._UZ(2,"br"),t.TgZ(3,"mat-form-field",13),t._UZ(4,"mat-label",5),t.ALo(5,"translate"),t.TgZ(6,"mat-select",14),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().selectedArtifactSetIndexs[0]=i})("ngModelChange",function(i){return t.CHM(e),t.oxw().onSelectArtifactSet(i,0)}),t._UZ(7,"mat-option",15),t.YNc(8,ft,2,2,"ng-container",16),t.qZA()(),t._uU(9," \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "),t.TgZ(10,"mat-form-field",13),t._UZ(11,"mat-label",5),t.ALo(12,"translate"),t.TgZ(13,"mat-select",14),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().selectedArtifactSetIndexs[1]=i})("ngModelChange",function(i){return t.CHM(e),t.oxw().onSelectArtifactSet(i,1)}),t._UZ(14,"mat-option",15),t.YNc(15,vt,2,2,"ng-container",16),t.qZA()(),t.YNc(16,Ct,3,1,"ng-container",17),t.YNc(17,Lt,3,1,"ng-container",17),t.TgZ(18,"app-extra-data",18),t._UZ(19,"br")(20,"br")(21,"app-extra-data",18),t.qZA()(),t.YNc(22,bt,4,2,"mat-tab-group",19),t.qZA()}if(2&a){const e=l.index,n=t.oxw();t.Q6J("label","[  "+(e+1)+"  ]"),t.xp6(4),t.Q6J("innerText",t.lcZ(5,18,"ARTIFACT.SET1")),t.xp6(2),t.Q6J("ngModel",n.selectedArtifactSetIndexs[0]),t.xp6(2),t.Q6J("ngForOf",n.artifactSetList),t.xp6(3),t.Q6J("innerText",t.lcZ(12,20,"ARTIFACT.SET2")),t.xp6(2),t.Q6J("ngModel",n.selectedArtifactSetIndexs[1]),t.xp6(2),t.Q6J("ngForOf",n.artifactSetList),t.xp6(1),t.Q6J("ngIf",n.selectedArtifactSetIndexs[0]&&""!=n.selectedArtifactSetIndexs[0]),t.xp6(1),t.Q6J("ngIf",n.selectedArtifactSetIndexs[1]&&""!=n.selectedArtifactSetIndexs[1]),t.xp6(1),t.Q6J("characterIndex",n.data.id)("skill",n.name_set)("skillIndex",2)("valueIndexs",n.getEffectValidIndexs()),t.xp6(3),t.Q6J("characterIndex",n.data.id)("skill",n.name_set)("skillIndex",1)("valueIndexs",n.getEffectValidIndexs()),t.xp6(1),t.Q6J("ngIf",n.selectedIndex==e)}}function Zt(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw().copyTab()}),t.TgZ(1,"mat-icon"),t._uU(2,"content_copy"),t.qZA()(),t.TgZ(3,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().addTab()}),t.TgZ(4,"mat-icon"),t._uU(5,"add_circle"),t.qZA()()}}let Pt=(()=>{class a{constructor(e,n){this.artifactService=e,this.calculatorService=n,this.name_set=r.hx.NAME_SET,this.no_desc={cn_sim:"",cn_tra:"",en:"",jp:""},this.tabs=[],this.artifactList=[r.hx.ARTIFACT_FLOWER,r.hx.ARTIFACT_PLUME,r.hx.ARTIFACT_SANDS,r.hx.ARTIFACT_GOBLET,r.hx.ARTIFACT_CIRCLET],this.artifactSetList=[],this.selectedFullArtifactSetIndex="",this.partIndex=0,this.effectContent1="",this.effectContent2=""}ngOnInit(){this.initializeArtifactSetList();let e=this.artifactService.getStorageInfoLength(this.data.id);(null==e||0==e)&&(e=1),this.tabs=Array.from({length:e}).map((n,i)=>`${i}`),this.selectedIndex=this.artifactService.getStorageActiveIndex(this.data.id),this.initSelectedArtifactSetIndexs()}ngOnChanges(e){e.currentLanguage&&this.selectedArtifactSetIndexs&&this.selectedArtifactSetIndexs.length>0&&this.initEffectContents()}addTab(){this.tabs.push((this.tabs.length+1).toString()),this.selectedIndex=this.tabs.length-1,this.setActiveIndex()}copyTab(){this.artifactService.copyAndCreateStorageInfo(this.data.id,this.selectedIndex),this.addTab()}removeTab(e){if(this.tabs.splice(e,1),this.artifactService.deleteStorageInfo(this.data.id,e),this.selectedIndex>=e){let n=this.tabs.length-1;this.selectedIndex=n>0?n:0,this.setActiveIndex()}else this.selectedIndex=0,this.setActiveIndex()}setActiveIndex(){this.artifactService.setStorageActiveIndex(this.data.id,this.selectedIndex),this.initSelectedArtifactSetIndexs(),this.calculatorService.setDirtyFlag(this.data.id)}onSelectArtifactSet(e,n){this.selectedArtifactSetIndexs[n]=e,this.initSelectedFullArtifactSetIndex(),this.initEffectContents(),this.setDefaultExtraData(),this.calculatorService.initExtraArtifactSetData(this.data.id)}getEffectValidIndexs(){return""!=this.selectedFullArtifactSetIndex?this.artifactService.getSetData(this.selectedFullArtifactSetIndex).setAffixs[1].paramValidIndexs:[]}initEffectContents(){this.effectContent1=this.getEffectContent(1)[this.currentLanguage].length>0?w.N.artifactEffectContentPreffix+this.getEffectContent(1)[this.currentLanguage]:"",this.effectContent2=this.getEffectContent(2)[this.currentLanguage].length>0?w.N.artifactEffectContentPreffix+this.getEffectContent(2)[this.currentLanguage]:""}getEffectContent(e){var n,i;let o=this.selectedArtifactSetIndexs[e-1];if(null==o)return this.no_desc;let c=0;return 2==e&&o==this.selectedFullArtifactSetIndex&&(c=1),null!==(i=null===(n=this.artifactService.getSetData(o))||void 0===n?void 0:n.setAffixs[c].desc)&&void 0!==i?i:this.no_desc}initializeArtifactSetList(){this.artifactSetList=[];let e=this.artifactService.getSetMap();for(let n in e)this.artifactSetList.push({setId:n,setName:e[n].setName,setAffixs:e[n].setAffixs})}initSelectedArtifactSetIndexs(){this.selectedArtifactSetIndexs=this.artifactService.getStorageSetIndexs(this.data.id,this.selectedIndex),this.initSelectedFullArtifactSetIndex(),this.initEffectContents(),this.setDefaultExtraData(),this.calculatorService.initExtraArtifactSetData(this.data.id)}initSelectedFullArtifactSetIndex(){this.selectedArtifactSetIndexs[0]==this.selectedArtifactSetIndexs[1]&&""!=this.selectedArtifactSetIndexs[0]&&this.selectedArtifactSetIndexs[0]?(this.selectedFullArtifactSetIndex=this.selectedArtifactSetIndexs[0],this.artifactService.setStorageFullSetIndex(this.data.id,this.selectedIndex,this.selectedFullArtifactSetIndex)):(this.selectedFullArtifactSetIndex="",this.artifactService.setStorageFullSetIndex(this.data.id,this.selectedIndex,""))}setDefaultExtraData(){this.artifactService.setDefaultExtraData(this.data.id,this.selectedArtifactSetIndexs,this.selectedFullArtifactSetIndex)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(r.bk),t.Y36(r.RO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-artifact"]],inputs:{data:"data",currentLanguage:["language","currentLanguage"]},features:[t.TTD],decls:14,vars:5,consts:[["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],["animationDuration","0",3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["disabled",""],["mat-tab-label",""],[3,"label"],[1,"artifact-set"],["appearance","legacy","floatLabel","always",1,"set-field"],[3,"ngModel","ngModelChange"],["value",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"characterIndex","skill","skillIndex","valueIndexs"],["mat-stretch-tabs","",3,"selectedIndex","selectedIndexChange",4,"ngIf"],[3,"value","innerText"],[3,"innerHTML"],["mat-stretch-tabs","",3,"selectedIndex","selectedIndexChange"],[1,"artifact-sub"],[3,"characterIndex","index","artifactType"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-icon-button","","matTooltip","Copy","matTooltipPosition","above",1,"add-button",3,"click"],["mat-icon-button","","matTooltip","Add","matTooltipPosition","above",1,"add-button",3,"click"]],template:function(e,n){1&e&&(t.ynx(0),t.TgZ(1,"mat-card",0)(2,"div",1),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"path",3)(5,"path",4),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"mat-card-title",5),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-card-content",6)(10,"mat-tab-group",7),t.NdJ("selectedIndexChange",function(o){return n.selectedIndex=o})("selectedIndexChange",function(){return n.setActiveIndex()}),t.YNc(11,St,23,22,"mat-tab",8),t.TgZ(12,"mat-tab",9),t.YNc(13,Zt,6,0,"ng-template",10),t.qZA()()()(),t.BQk()),2&e&&(t.xp6(7),t.Q6J("innerText",t.lcZ(8,3,"ARTIFACT.NAME")),t.xp6(3),t.Q6J("selectedIndex",n.selectedIndex),t.xp6(1),t.Q6J("ngForOf",n.tabs))},directives:[p.a8,x.Zt,x.Bh,p.dk,p.n5,p.dn,b.SP,s.sg,b.uX,_.KE,_.hX,C.gD,u.JJ,u.On,L.ey,s.O5,Z.f,ut,b.uD,Q.lW,y.p6,k.Hw,y.VK,y.OP,A.gM],pipes:[v.X$],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-top:10px;margin-bottom:5px;border-radius:0%}.header-text[_ngcontent-%COMP%]{font-size:inherit}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}  .mat-tab-label,   .mat-tab-label-active{min-width:0!important;padding:3px!important;margin:3px!important}.add-button[_ngcontent-%COMP%]{width:30px}.set-field[_ngcontent-%COMP%]{width:140px}.artifact-set[_ngcontent-%COMP%], .artifact-sub[_ngcontent-%COMP%]{margin-left:2%;width:96%}"],changeDetection:0}),a})();function Ot(a,l){1&a&&t.GkF(0)}function Mt(a,l){if(1&a&&(t.TgZ(0,"mat-option",10),t._UZ(1,"span",6),t.ALo(2,"translate"),t.qZA()),2&a){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("innerText",t.lcZ(2,2,"GENSHIN.OTHER."+e))}}function It(a,l){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",5),t._UZ(2,"mat-label",6),t.ALo(3,"translate"),t.TgZ(4,"mat-select",7),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw(2).overrideElement=i})("ngModelChange",function(i){return t.CHM(e),t.oxw(2).onChangeElement(i)}),t.TgZ(5,"mat-option",8),t._UZ(6,"span",6),t.ALo(7,"translate"),t.qZA(),t.YNc(8,Mt,3,4,"mat-option",9),t.qZA()(),t.BQk()}if(2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("innerText",t.lcZ(3,4,"GENSHIN.OTHER.OVERRIDE_ELEMENT")),t.xp6(2),t.Q6J("ngModel",e.overrideElement),t.xp6(2),t.Q6J("innerText",t.lcZ(7,6,"GENSHIN.OTHER.DEFAULT_ELEMENT")),t.xp6(2),t.Q6J("ngForOf",e.elementList)}}function yt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",11),t._UZ(3,"div",12),t.qZA()(),t.TgZ(4,"tr"),t._UZ(5,"td",6)(6,"td",13),t.qZA(),t.TgZ(7,"tr")(8,"td",11),t._UZ(9,"app-extra-data",14),t.qZA()(),t.BQk()),2&a){const e=l.$implicit,n=l.index,i=t.oxw(2);t.xp6(5),t.Q6J("innerText",e.desc),t.xp6(1),t.Q6J("innerText",i.showValues[n])("matTooltip",i.tipValues[n]),t.xp6(3),t.Q6J("characterIndex",i.data.id)("skill",i.skill)("valueIndexs",e.valuePropIndexs)("overrideElement",i.overrideElement)}}function Et(a,l){if(1&a&&(t.YNc(0,It,9,8,"ng-container",3),t.TgZ(1,"table"),t.YNc(2,yt,10,7,"ng-container",4),t.qZA()),2&a){const e=t.oxw();t.Q6J("ngIf","normal"==e.skill),t.xp6(2),t.Q6J("ngForOf",e.skillDescDatas)}}function Jt(a,l){}let Nt=(()=>{class a{constructor(e,n,i,o){this.percentPipe=e,this.decimalPipe=n,this.noCommaPipe=i,this.calculatorService=o,this.overrideElement=""}ngOnInit(){this.initDatas()}onChangeElement(e){}initDatas(){this.skillDescDatas=this.getCharSkillDescObject(this.skill,this.currentLanguage),this.showValues=[],this.tipValues=[];for(let e of this.skillDescDatas)this.showValues.push(this.getTalentValue(this.skill,e,this.currentLanguage,this.skillLevelIndex)),this.tipValues.push(this.getTalentValue(this.skill,e,this.currentLanguage,this.skillLevelIndex,!0));this.elementList=r.hx.PROPS_ELEMENTS}getDataProperty(e){return this.data.skills[e]}getDataProperties(e){return this.data.skills[e]}getCharSkillDescObject(e,n){return this.getDataProperty(e).paramDescSplitedList[n]}getTalentValue(e,n,i,o,c=!1){let g=n.prefix,E=[];n.valuePropIndexs.forEach((P,ne)=>{let O=this.data.skills[e].paramMap[o][P];c||(O=n.isPercent[ne]?this.percentPipe.transform(O,"1.0-1"):this.noCommaPipe.transform(this.decimalPipe.transform(O,"1.0-1"))),E.push(`${O}`)});let U=0,ee=n.middles.length;for(let P=0;P<E.length;++P)g+=E[P],U<ee&&(g+=n.middles[U++]);return g+=n.suffix,g}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.Zx),t.Y36(s.JJ),t.Y36(r.od),t.Y36(r.RO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-extra-info"]],inputs:{data:"data",skill:"skill",currentLanguage:["language","currentLanguage"],skillLevelIndex:"skillLevelIndex",hasLevel:"hasLevel"},decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["skills",""],["other",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["appearance","legacy","floatLabel","always"],[3,"innerText"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["colspan","2"],[1,"placeholder"],["matTooltipPosition","right",3,"innerText","matTooltip"],[3,"characterIndex","skill","valueIndexs","overrideElement"]],template:function(e,n){if(1&e&&(t.YNc(0,Ot,1,0,"ng-container",0),t.YNc(1,Et,3,2,"ng-template",null,1,t.W1O),t.YNc(3,Jt,0,0,"ng-template",null,2,t.W1O)),2&e){const i=t.MAs(2),o=t.MAs(4);t.Q6J("ngIf",n.hasLevel)("ngIfThen",i)("ngIfElse",o)}},directives:[s.O5,_.KE,_.hX,C.gD,u.JJ,u.On,L.ey,s.sg,A.gM,Z.f],pipes:[v.X$],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(1)   td[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}tr[_ngcontent-%COMP%]:nth-of-type(3n+2)   td[_ngcontent-%COMP%]:nth-of-type(1){text-align:left}tr[_ngcontent-%COMP%]:nth-of-type(3n+2)   td[_ngcontent-%COMP%]:nth-of-type(2){text-align:right}tr[_ngcontent-%COMP%]:nth-of-type(3n+3)   td[_ngcontent-%COMP%]:nth-of-type(1){text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}tr[_ngcontent-%COMP%]:nth-of-type(3n+3)   td[_ngcontent-%COMP%]:nth-of-type(2){text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.placeholder[_ngcontent-%COMP%]{height:2px}"]}),a})();function wt(a,l){if(1&a&&(t.ynx(0),t._UZ(1,"mat-option",15),t.BQk()),2&a){const e=l.$implicit;t.xp6(1),t.Q6J("value",e)("innerText",e.levelNum)}}function Qt(a,l){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header",10)(3,"mat-panel-title"),t._UZ(4,"span",6),t.qZA()(),t.TgZ(5,"mat-form-field",11),t._UZ(6,"mat-label",6),t.ALo(7,"translate"),t.TgZ(8,"mat-select",12),t.NdJ("ngModelChange",function(i){const c=t.CHM(e).$implicit;return t.oxw(2).selectedLevels[c]=i})("ngModelChange",function(i){const c=t.CHM(e).$implicit;return t.oxw(2).onChangeLevel(c,i)}),t.YNc(9,wt,2,2,"ng-container",8),t.qZA()(),t._UZ(10,"app-extra-info",13)(11,"br")(12,"span",14),t.qZA(),t.BQk()}if(2&a){const e=l.$implicit,n=l.first,i=t.oxw(2);t.xp6(1),t.Q6J("expanded",n),t.xp6(3),t.Q6J("innerText",i.getDataProperty(e).name[i.currentLanguage]),t.xp6(2),t.Q6J("innerText",t.lcZ(7,11,"PROPS.LEVEL")),t.xp6(2),t.Q6J("ngModel",i.selectedLevels[e]),t.xp6(1),t.Q6J("ngForOf",i.levelOptions),t.xp6(1),t.Q6J("data",i.data)("skill",e)("language",i.currentLanguage)("hasLevel",!0)("skillLevelIndex",i.selectedLevels[e].level),t.xp6(2),t.Q6J("innerHTML",i.getDataProperty(e).desc[i.currentLanguage],t.oJD)}}function kt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-expansion-panel",16)(2,"mat-expansion-panel-header",10)(3,"mat-panel-title"),t._UZ(4,"span",6),t.qZA()(),t._UZ(5,"app-extra-info",13)(6,"br")(7,"span",14),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(4),t.Q6J("innerText",n.getDataProperty(e).name[n.currentLanguage]),t.xp6(1),t.Q6J("data",n.data)("skill",e)("language",n.currentLanguage)("hasLevel",!0)("skillLevelIndex",n.talentDefaultLevel),t.xp6(2),t.Q6J("innerHTML",n.getDataProperty(e).desc[n.currentLanguage],t.oJD)}}function Ut(a,l){if(1&a&&(t.ynx(0),t.YNc(1,kt,8,7,"ng-container",0),t.BQk()),2&a){const e=l.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.getDataProperty(e).name)}}function Rt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-expansion-panel",16)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._UZ(4,"span",6),t.qZA()(),t._UZ(5,"span",14),t.TgZ(6,"app-extra-data",17),t._UZ(7,"br")(8,"br"),t.qZA()(),t.BQk()),2&a){const e=l.$implicit,n=l.index,i=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(4),t.Q6J("innerText",e.name[o.currentLanguage]),t.xp6(1),t.Q6J("innerHTML",e.desc[o.currentLanguage],t.oJD),t.xp6(1),t.Q6J("characterIndex",o.data.id)("skill",i)("skillIndex",n)("valueIndexs",e.paramValidIndexs)}}function Ft(a,l){if(1&a&&(t.ynx(0),t.YNc(1,Rt,9,6,"ng-container",8),t.BQk()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.getDataProperties(e))}}function Dt(a,l){if(1&a&&(t.ynx(0),t.YNc(1,Ft,2,1,"ng-container",0),t.BQk()),2&a){const e=l.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.getDataProperty(e))}}function Bt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-card",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"mat-card-title",6),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-card-content",7)(10,"mat-accordion"),t.YNc(11,Qt,13,13,"ng-container",8),t.YNc(12,Ut,2,1,"ng-container",8),t.YNc(13,Dt,2,1,"ng-container",8),t.qZA()()(),t.BQk()),2&a){const e=t.oxw();t.xp6(7),t.Q6J("innerText",t.lcZ(8,4,"CHARACTER.TALENTS")),t.xp6(4),t.Q6J("ngForOf",e.skills),t.xp6(1),t.Q6J("ngForOf",e.otherSkills),t.xp6(1),t.Q6J("ngForOf",e.proudSkills)}}let Ht=(()=>{class a{constructor(e,n,i,o,c){this.percentPipe=e,this.decimalPipe=n,this.noCommaPipe=i,this.characterService=o,this.calculatorService=c,this.minLevel=1,this.maxLevel=15,this.defaultLevel=10,this.skills=[r.hx.NAME_SKILLS_NORMAL,r.hx.NAME_SKILLS_SKILL,r.hx.NAME_SKILLS_ELEMENTAL_BURST],this.otherSkills=[r.hx.NAME_SKILLS_OTHER],this.proudSkills=[r.hx.NAME_SKILLS_PROUD],this.levelPadNum=2,this.talentDefaultLevel=r.hx.NAME_TALENT_DEFAULT_LEVEL,this.props=r.hx.PROPS_CHARA_ENEMY_BASE,this.props_sub=r.hx.PROPS_CHARA_WEAPON_SUB,this.percent_props=r.hx.PROPS_CHARA_WEAPON_PERCENT,this.levelOptions=[],this.selectedLevels={}}ngOnInit(){var e,n,i;for(let o=this.minLevel;o<=this.maxLevel;++o)this.levelOptions.push({level:o.toString().padStart(this.levelPadNum,"0"),levelNum:o});for(let o of this.skills){let c;switch(o){case r.hx.NAME_SKILLS_NORMAL:c=null!==(e=this.getLevelFromString(this.characterService.getNormalLevel(this.data.id)))&&void 0!==e?e:this.levelOptions[this.defaultLevel-1];break;case r.hx.NAME_SKILLS_SKILL:c=null!==(n=this.getLevelFromString(this.characterService.getSkillLevel(this.data.id)))&&void 0!==n?n:this.levelOptions[this.defaultLevel-1];break;case r.hx.NAME_SKILLS_ELEMENTAL_BURST:c=null!==(i=this.getLevelFromString(this.characterService.getElementalBurstLevel(this.data.id)))&&void 0!==i?i:this.levelOptions[this.defaultLevel-1]}this.selectedLevels[o]=c,this.onChangeLevel(o,this.selectedLevels[o],!0)}this.calculatorService.initExtraCharacterData(this.data.id)}onChangeLevel(e,n,i=!1){switch(e){case r.hx.NAME_SKILLS_NORMAL:this.characterService.setNormalLevel(this.data.id,n.level);break;case r.hx.NAME_SKILLS_SKILL:this.characterService.setSkillLevel(this.data.id,n.level);break;case r.hx.NAME_SKILLS_ELEMENTAL_BURST:this.characterService.setElementalBurstLevel(this.data.id,n.level)}i||this.calculatorService.initExtraCharacterData(this.data.id)}getDataProperty(e){return this.data.skills[e]}getDataProperties(e){return this.data.skills[e]}getCharSkillDescObject(e,n){return this.getDataProperty(e).paramDescSplitedList[n]}getLevelFromString(e){if(e)return this.levelOptions[parseInt(e)-1]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(s.Zx),t.Y36(s.JJ),t.Y36(S.o),t.Y36(r.AE),t.Y36(r.RO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-talent"]],inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","expand",3,"expanded"],["matTooltipPosition","right"],["appearance","legacy","floatLabel","always"],[3,"ngModel","ngModelChange"],[1,"extra-info",3,"data","skill","language","hasLevel","skillLevelIndex"],[3,"innerHTML"],[3,"value","innerText"],[1,"mat-elevation-z0","expand"],[3,"characterIndex","skill","skillIndex","valueIndexs"]],template:function(e,n){1&e&&t.YNc(0,Bt,14,6,"ng-container",0),2&e&&t.Q6J("ngIf",n.data.skills.normal.name)},directives:[s.O5,p.a8,x.Zt,x.Bh,p.dk,p.n5,p.dn,h.pp,s.sg,h.ib,h.yz,h.yK,_.KE,_.hX,C.gD,u.JJ,u.On,L.ey,Nt,Z.f],pipes:[v.X$],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function Yt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),t._UZ(4,"span",6),t.qZA()(),t._UZ(5,"span",10),t.TgZ(6,"app-extra-data",11),t._UZ(7,"br")(8,"br"),t.qZA()(),t.BQk()),2&a){const e=l.$implicit,n=l.index,i=t.oxw(2);t.xp6(4),t.Q6J("innerText",e.name[i.currentLanguage]),t.xp6(1),t.Q6J("innerHTML",e.desc[i.currentLanguage],t.oJD),t.xp6(1),t.Q6J("characterIndex",i.data.id)("skill",i.name_constellation)("skillIndex",n)("valueIndexs",e.paramValidIndexs)}}function zt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-card",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"mat-card-title",6),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-card-content",7)(10,"mat-accordion"),t.YNc(11,Yt,9,6,"ng-container",8),t.qZA()()(),t.BQk()),2&a){const e=t.oxw();t.xp6(7),t.Q6J("innerText",t.lcZ(8,2,"CHARACTER.CONSTELLATION")),t.xp6(4),t.Q6J("ngForOf",e.data.skills.talents)}}let Wt=(()=>{class a{constructor(){this.constellationPrefix="c",this.constellationNum=[1,2,3,4,5,6],this.props=r.hx.PROPS_CHARA_ENEMY_BASE,this.props_sub=r.hx.PROPS_CHARA_WEAPON_SUB,this.percent_props=r.hx.PROPS_CHARA_WEAPON_PERCENT,this.name_constellation=r.hx.NAME_CONSTELLATION}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-constellation"]],inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","expand"],[3,"innerHTML"],[3,"characterIndex","skill","skillIndex","valueIndexs"]],template:function(e,n){1&e&&t.YNc(0,zt,12,4,"ng-container",0),2&e&&t.Q6J("ngIf",n.data.skills.talents)},directives:[s.O5,p.a8,x.Zt,x.Bh,p.dk,p.n5,p.dn,h.pp,s.sg,h.ib,h.yz,h.yK,Z.f],pipes:[v.X$],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function qt(a,l){if(1&a&&(t.TgZ(0,"mat-option",14),t._UZ(1,"span",5),t.ALo(2,"translate"),t.qZA()),2&a){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.Q6J("innerText",t.lcZ(2,2,"PROPS."+e.toUpperCase()))}}function $t(a,l){if(1&a&&(t.TgZ(0,"mat-tab",11),t._UZ(1,"br"),t.TgZ(2,"mat-form-field",12),t._UZ(3,"mat-label",5),t.ALo(4,"translate"),t.TgZ(5,"mat-select"),t._UZ(6,"mat-option"),t.YNc(7,qt,3,4,"mat-option",13),t.qZA()()()),2&a){const e=l.index,n=t.oxw();t.Q6J("label","[  "+(e+1)+"  ]"),t.xp6(3),t.Q6J("innerText",t.lcZ(4,3,"OTHER.TARGET")),t.xp6(4),t.Q6J("ngForOf",n.propList)}}function Vt(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().addTab()}),t.TgZ(1,"mat-icon"),t._uU(2,"add_circle"),t.qZA()()}}let Xt=(()=>{class a{constructor(){this.tabs=["1","2","3"],this.selectedIndex=0}ngOnInit(){this.propList=r.hx.PROPS_OTHER}addTab(){this.tabs.push((this.tabs.length+1).toString()),this.selectedIndex=this.tabs.length-1}removeTab(e){if(this.tabs.splice(e,1),this.selectedIndex>=this.tabs.length){let n=this.tabs.length-1;this.selectedIndex=n>0?n:0}}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-other"]],inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:14,vars:5,consts:[["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["disabled",""],["mat-tab-label",""],[3,"label"],["appearance","legacy","floatLabel","always"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-icon-button","","matTooltip","Add","matTooltipPosition","above",1,"add-button",3,"click"]],template:function(e,n){1&e&&(t.ynx(0),t.TgZ(1,"mat-card",0)(2,"div",1),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"path",3)(5,"path",4),t.qZA()(),t.kcU(),t.TgZ(6,"mat-card-header"),t._UZ(7,"mat-card-title",5),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-card-content",6)(10,"mat-tab-group",7),t.NdJ("selectedIndexChange",function(o){return n.selectedIndex=o}),t.YNc(11,$t,8,5,"mat-tab",8),t.TgZ(12,"mat-tab",9),t.YNc(13,Vt,3,0,"ng-template",10),t.qZA()()()(),t.BQk()),2&e&&(t.xp6(7),t.Q6J("innerText",t.lcZ(8,3,"OTHER.NAME")),t.xp6(3),t.Q6J("selectedIndex",n.selectedIndex),t.xp6(1),t.Q6J("ngForOf",n.tabs))},directives:[p.a8,x.Zt,x.Bh,p.dk,p.n5,p.dn,b.SP,s.sg,b.uX,_.KE,_.hX,C.gD,L.ey,b.uD,Q.lW,A.gM,k.Hw],pipes:[v.X$],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-top:10px;margin-bottom:5px;border-radius:0%}.header-text[_ngcontent-%COMP%]{font-size:inherit}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}  .mat-tab-label,   .mat-tab-label-active{min-width:0!important;padding:3px!important;margin:3px!important}.add-button[_ngcontent-%COMP%]{width:30px}"]}),a})();function Kt(a,l){if(1&a&&(t.TgZ(0,"div",5),t._UZ(1,"div",5),t.qZA()),2&a){const e=t.oxw();t.Udp("background-image","url("+e.backgroundURL+")"),t.Q6J("@imgLoad",e.imgState)}}const f="beforeLoad",T="loaded",Gt=[{path:"",component:(()=>{class a{constructor(e,n,i,o,c){this.httpService=e,this.route=n,this.characterService=i,this.calculatorService=o,this.languageService=c,this.imgState=f,this.otherState=f,this.currentLanguage=this.languageService.getCurrentLang(),this.languageService.getLang().subscribe(g=>{this.currentLanguage=g}),setTimeout(()=>{this.otherState=T},100)}ngOnInit(){this.route.queryParams.subscribe(e=>{this.data=this.characterService.get(e.index),this.currentCharacterIndex=e.index.toString(),this.initializeBackGroundImage(),this.characterService.setDefaultExtraData(e.index),this.calculatorService.initCharacterData(e.index),console.log(this.data),console.log(this.characterService.getExtraData(e.index))})}ngOnDestroy(){this.backgroundLoadFlg=!1,this.otherState=f,this.imgState=f}initializeBackGroundImage(){if(!this.backgroundURL){let e=this.data.images.background;e&&this.httpService.get(e,"blob").then(n=>{n&&(this.backgroundURL=window.URL.createObjectURL(n),setTimeout(()=>{this.imgState=T},100))}).catch(()=>{})}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(r.OE),t.Y36(M.gz),t.Y36(r.AE),t.Y36(r.RO),t.Y36(r.TS))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-main"]],decls:17,vars:16,consts:[[1,"main"],["class","background",3,"background-image",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","center",1,"content"],[3,"data","language"],[1,"middle"],[1,"background"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Kt,2,3,"div",1),t.TgZ(2,"div",2)(3,"div"),t._UZ(4,"app-character",3)(5,"div",4)(6,"app-enemy",3),t.qZA(),t.TgZ(7,"div"),t._UZ(8,"app-weapon",3)(9,"div",4)(10,"app-artifact",3),t.qZA(),t.TgZ(11,"div"),t._UZ(12,"app-talent",3),t.qZA(),t.TgZ(13,"div"),t._UZ(14,"app-constellation",3)(15,"div",4)(16,"app-other",3),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.backgroundURL),t.xp6(1),t.Q6J("@otherLoad",n.otherState),t.xp6(2),t.Q6J("data",n.data)("language",n.currentLanguage),t.xp6(2),t.Q6J("data",n.data)("language",n.currentLanguage),t.xp6(2),t.Q6J("data",n.data)("language",n.currentLanguage),t.xp6(2),t.Q6J("data",n.data)("language",n.currentLanguage),t.xp6(2),t.Q6J("data",n.data)("language",n.currentLanguage),t.xp6(2),t.Q6J("data",n.data)("language",n.currentLanguage),t.xp6(2),t.Q6J("data",n.data)("language",n.currentLanguage))},directives:[s.O5,N.xw,N.Wh,W,tt,pt,Pt,Ht,Wt,Xt],styles:[".main[_ngcontent-%COMP%]{height:100%}.content[_ngcontent-%COMP%]{padding:6px}.background[_ngcontent-%COMP%]{position:fixed;bottom:0;background-position:right top;background-size:cover;z-index:-10;min-height:100%;width:100%}.background-content[_ngcontent-%COMP%]{position:fixed;min-height:100%;width:100%}.middle[_ngcontent-%COMP%]{margin-top:24px}"],data:{animation:[(0,m.X$)("imgLoad",[(0,m.SB)(f,(0,m.oB)({opacity:.01})),(0,m.SB)(T,(0,m.oB)({opacity:.16})),(0,m.eR)(f+"=>"+T,[(0,m.jt)("1s")]),(0,m.eR)(T+"=>"+f,[(0,m.jt)("0.2s")])]),(0,m.X$)("otherLoad",[(0,m.SB)(f,(0,m.oB)({opacity:.01})),(0,m.SB)(T,(0,m.oB)({opacity:1})),(0,m.eR)(f+"=>"+T,[(0,m.jt)("0.5s")]),(0,m.eR)(T+"=>"+f,[(0,m.jt)("0.2s")])])]}}),a})()}];let jt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[M.Bz.forChild(Gt)],M.Bz]}),a})(),te=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[s.Zx,s.JJ,r.od,r.dG,r.W7],imports:[[s.ez,R.o9,F.h,jt,r.m8]]}),a})()}}]);