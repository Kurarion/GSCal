"use strict";(self.webpackChunkGSCal=self.webpackChunkGSCal||[]).push([[955],{9955:(Ae,E,c)=>{c.r(E),c.d(E,{CharacterModule:()=>Se});var s=c(9808),J=c(9764),k=c(9091),M=c(1787),d=c(1777),e=c(5e3),r=c(5443),b=c(7093),p=c(9224),_=c(3737),A=c(4834),g=c(288),v=c(7322),T=c(4107),u=c(3075),O=c(508),S=c(7238),f=c(4218),Z=c(5348);function w(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",13),e.ALo(2,"number"),e.ALo(3,"translate"),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",e.xi3(2,2,t.levelNum,"1.0-0")+(t.isAscend?e.lcZ(3,5,"PROPS.ASCENDED"):""))}}function Q(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",14),e.ALo(2,"translate"),e._UZ(3,"td",15),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function U(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",14),e.ALo(2,"translate"),e._UZ(3,"td",15),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function R(a,o){if(1&a&&(e.ynx(0),e.YNc(1,U,8,15,"tr",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.selectedLevelProps[t]&&0!=n.selectedLevelProps[t].value)}}function D(a,o){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card",1)(2,"div",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header"),e._UZ(7,"div",6),e.TgZ(8,"mat-card-title"),e._uU(9),e.qZA()(),e.TgZ(10,"mat-card-content",7),e._UZ(11,"mat-divider"),e.TgZ(12,"mat-expansion-panel",8)(13,"mat-expansion-panel-header")(14,"mat-panel-title"),e._UZ(15,"span",9),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"mat-panel-description"),e.qZA(),e.TgZ(18,"mat-form-field",10),e._UZ(19,"mat-label",9),e.ALo(20,"translate"),e.TgZ(21,"mat-select",11),e.NdJ("ngModelChange",function(l){return e.CHM(t),e.oxw().selectedLevel=l})("ngModelChange",function(l){return e.CHM(t),e.oxw().onChangeLevel(l)}),e.YNc(22,w,4,7,"ng-container",12),e.qZA()(),e.TgZ(23,"table"),e.YNc(24,Q,8,15,"tr",12),e.YNc(25,R,2,1,"ng-container",12),e.qZA()()()(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(7),e.Udp("background-image",t.avatarLoadFlg?"url("+t.avatarURL+")":""),e.xp6(2),e.Oqu(t.data.name[t.currentLanguage]),e.xp6(3),e.Q6J("expanded",!0),e.xp6(3),e.Q6J("innerText",e.lcZ(16,10,"CHARACTER.PROPS")),e.xp6(4),e.Q6J("innerText",e.lcZ(20,12,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",t.selectedLevel),e.xp6(1),e.Q6J("ngForOf",t.levelOptions),e.xp6(2),e.Q6J("ngForOf",t.props),e.xp6(1),e.Q6J("ngForOf",t.props_sub)}}let I=(()=>{class a{constructor(t,n,l,i){this.httpService=t,this.extraDataService=n,this.characterService=l,this.calculatorService=i,this.minLevel=1,this.maxLevel=90,this.ascendLevels=[20,40,50,60,70,80,90],this.levelPadNum=2,this.props=r.hx.PROPS_CHARA_ENEMY_BASE,this.props_sub=r.hx.PROPS_CHARA_WEAPON_SUB,this.percent_props=r.hx.PROPS_CHARA_WEAPON_PERCENT,this.levelOptions=[]}ngOnInit(){var t;this.initializeBackGroundImage();for(let n=this.minLevel;n<=this.maxLevel;++n)this.levelOptions.push({level:n.toString().padStart(this.levelPadNum,"0"),levelNum:n}),this.ascendLevels.includes(n)&&n!=this.maxLevel&&this.levelOptions.push({level:n.toString().padStart(this.levelPadNum,"0")+"+",levelNum:n,isAscend:!0});this.selectedLevel=null!==(t=this.getLevelFromString(this.characterService.getLevel(this.data.id)))&&void 0!==t?t:this.levelOptions[this.levelOptions.length-1],this.onChangeLevel(this.selectedLevel)}ngOnDestroy(){this.characterService.saveData()}onChangeLevel(t){this.selectedLevelProps={};let n=this.data.levelMap[t.level];for(let l in n){let i=l.toUpperCase();this.selectedLevelProps[i]={isPercent:this.percent_props.includes(i),value:n[l]}}this.characterService.setLevel(this.data.id,t.level),this.calculatorService.setDirtyFlag(this.data.id)}initializeBackGroundImage(){this.avatarURL||(this.avatarLoadFlg=!1,this.httpService.get(this.data.images.icon,"blob").then(n=>{n&&(this.avatarURL=window.URL.createObjectURL(n),setTimeout(()=>{this.avatarLoadFlg=!0},100))}).catch(()=>{}))}getLevelFromString(t){if(!t)return;let n=parseInt(t),l=t.includes("+"),i=-1;for(let m=0;m<this.ascendLevels.length&&this.ascendLevels[m]<n;++m)++i;return this.levelOptions[i+(l?1:0)+n]}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.OE),e.Y36(r.Xx),e.Y36(r.AE),e.Y36(r.RO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character"]],inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["mat-card-avatar","",1,"avatar"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[3,"innerText"],["appearance","legacy","floatLabel","always"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"]],template:function(t,n){1&t&&e.YNc(0,D,26,14,"ng-container",0),2&t&&e.Q6J("ngIf",n.data)},directives:[s.O5,p.a8,_.Zt,_.Bh,p.dk,p.kc,p.n5,p.dn,A.d,g.ib,g.yz,g.yK,g.u4,v.KE,v.hX,T.gD,u.JJ,u.On,s.sg,O.ey,S.gM],pipes:[f.X$,s.JJ,Z.o,s.Zx],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();var F=c(327);function B(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",12),e.BQk()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("value",t.index)("innerText",t.names[n.currentLanguage])}}function Y(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",12),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",t)}}function z(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",12),e.ALo(2,"number"),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",e.xi3(2,2,t.level,"1.0-0"))}}function W(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",13),e.ALo(2,"translate"),e._UZ(3,"td",14),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"rate"),e.ALo(7,"noComma"),e.ALo(8,"number"),e.ALo(9,"rate"),e.ALo(10,"rate"),e.qZA()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,e.Dn7(6,10,n.selectedLevelProps[t].value,n.getPropRate(t),n.selectedPlayerNum-1),"1.0-1")):e.lcZ(7,14,e.xi3(8,16,e.Dn7(9,19,n.selectedLevelProps[t].value,n.getPropRate(t),n.selectedPlayerNum-1),"1.0-0")))("matTooltip",e.Dn7(10,23,n.selectedLevelProps[t].value,n.getPropRate(t),n.selectedPlayerNum-1))}}function H(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",13),e.ALo(2,"translate"),e._UZ(3,"td",14),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function $(a,o){if(1&a&&(e.ynx(0),e.YNc(1,H,8,15,"tr",15),e.BQk()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.selectedLevelProps[t])}}let q=(()=>{class a{constructor(t,n,l,i){this.httpService=t,this.enemyService=n,this.calculatorService=l,this.extraDataService=i,this.minLevel=1,this.maxLevel=100,this.defaultLevel=90,this.minPlayerNum=1,this.maxPlayerNum=4,this.hpRates=[1,1.5,2,2.5],this.attackRates=[1,1.1,1.25,1.4],this.levelPadNum=3,this.props=r.hx.PROPS_CHARA_ENEMY_BASE,this.props_sub=r.hx.PROPS_ENEMY_SUB,this.percent_props=r.hx.PROPS_ENEMY_PERCENT,this.enemyList=[],this.levelOptions=[],this.playerNumOptions=[]}ngOnInit(){var t,n,l;this.initializeEnemyList();for(let i=this.minLevel;i<=this.maxLevel;++i)this.levelOptions.push({level:i.toString().padStart(this.levelPadNum,"0"),levelNum:i});for(let i=this.minPlayerNum;i<=this.maxPlayerNum;++i)this.playerNumOptions.push(i);this.selectedEnemyIndex=null!==(t=this.enemyService.getIndex(this.data.id))&&void 0!==t?t:this.enemyList[0].index,this.selectedPlayerNum=null!==(n=this.getPlayerNumFromNumber(this.enemyService.getPlayerNum(this.data.id)))&&void 0!==n?n:this.minPlayerNum,this.selectedLevel=null!==(l=this.getLevelFromString(this.enemyService.getLevel(this.data.id)))&&void 0!==l?l:this.levelOptions[this.defaultLevel-1],this.onSelectEnemy(this.selectedEnemyIndex),this.onChangeLevel(this.selectedLevel),this.onChangePlayerNum(this.selectedPlayerNum)}ngOnDestroy(){this.enemyService.saveData()}onSelectEnemy(t){this.enemyData=this.enemyService.get(t),console.log(this.enemyData),this.calculatorService.initEnemyData(this.data.id,t),this.enemyService.setIndex(this.data.id,this.enemyData.id)}onChangeLevel(t){this.selectedLevelProps={};let n=this.enemyData.levelMap[t.level];for(let l in n){let i=l.toUpperCase();this.selectedLevelProps[i]={isPercent:this.percent_props.includes(i),value:n[l]}}this.enemyService.setLevel(this.data.id,t.level),this.calculatorService.setDirtyFlag(this.data.id)}onChangePlayerNum(t){this.enemyService.setPlayerNum(this.data.id,t)}getPropRate(t){return this[t.toLocaleLowerCase()+"Rates"]}initializeBackGroundImage(){this.avatarLoadFlg=!1,this.httpService.get(this.enemyData.images.icon,"blob").then(n=>{n&&(this.avatarURL=window.URL.createObjectURL(n),setTimeout(()=>{this.avatarLoadFlg=!0},100))}).catch(()=>{})}initializeEnemyList(t){this.enemyList=[];let n=this.enemyService.getMap();for(let l in n)this.enemyList.push({index:l,names:n[l].name,codeName:n[l].monsterName,enemyType:n[l].type})}getLevelFromString(t){if(t)return this.levelOptions[parseInt(t)-1]}getPlayerNumFromNumber(t){if(t)return t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.OE),e.Y36(r.z),e.Y36(r.RO),e.Y36(r.Xx))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-enemy"]],inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:35,vars:21,consts:[["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"header-text"],["appearance","legacy","floatLabel","always"],[3,"innerText"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"],[4,"ngIf"]],template:function(t,n){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1),e.O4$(),e.TgZ(3,"svg",2),e._UZ(4,"path",3)(5,"path",4),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header")(7,"mat-card-title",5)(8,"mat-form-field",6),e._UZ(9,"mat-label",7),e.ALo(10,"translate"),e.TgZ(11,"mat-select",8),e.NdJ("ngModelChange",function(i){return n.selectedEnemyIndex=i})("ngModelChange",function(i){return n.onSelectEnemy(i)}),e.YNc(12,B,2,2,"ng-container",9),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"mat-form-field",6),e._UZ(15,"mat-label",7),e.ALo(16,"translate"),e.TgZ(17,"mat-select",8),e.NdJ("ngModelChange",function(i){return n.selectedPlayerNum=i})("ngModelChange",function(i){return n.onChangePlayerNum(i)}),e.YNc(18,Y,2,2,"ng-container",9),e.qZA()()()(),e.TgZ(19,"mat-card-content",10),e._UZ(20,"mat-divider"),e.TgZ(21,"mat-expansion-panel",11)(22,"mat-expansion-panel-header")(23,"mat-panel-title"),e._UZ(24,"span",7),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"mat-panel-description"),e.qZA(),e.TgZ(27,"mat-form-field",6),e._UZ(28,"mat-label",7),e.ALo(29,"translate"),e.TgZ(30,"mat-select",8),e.NdJ("ngModelChange",function(i){return n.selectedLevel=i})("ngModelChange",function(i){return n.onChangeLevel(i)}),e.YNc(31,z,3,5,"ng-container",9),e.qZA()(),e.TgZ(32,"table"),e.YNc(33,W,11,27,"tr",9),e.YNc(34,$,2,1,"ng-container",9),e.qZA()()()(),e.BQk()),2&t&&(e.xp6(9),e.Q6J("innerText",e.lcZ(10,13,"ENEMY.NAME")),e.xp6(2),e.Q6J("ngModel",n.selectedEnemyIndex),e.xp6(1),e.Q6J("ngForOf",n.enemyList),e.xp6(3),e.Q6J("innerText",e.lcZ(16,15,"ENEMY.PLAYERNUM")),e.xp6(2),e.Q6J("ngModel",n.selectedPlayerNum),e.xp6(1),e.Q6J("ngForOf",n.playerNumOptions),e.xp6(3),e.Q6J("expanded",!0),e.xp6(3),e.Q6J("innerText",e.lcZ(25,17,"ENEMY.PROPS")),e.xp6(4),e.Q6J("innerText",e.lcZ(29,19,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",n.selectedLevel),e.xp6(1),e.Q6J("ngForOf",n.levelOptions),e.xp6(2),e.Q6J("ngForOf",n.props),e.xp6(1),e.Q6J("ngForOf",n.props_sub))},directives:[p.a8,_.Zt,_.Bh,p.dk,p.n5,v.KE,v.hX,T.gD,u.JJ,u.On,s.sg,O.ey,p.dn,A.d,g.ib,g.yz,g.yK,g.u4,S.gM,s.O5],pipes:[f.X$,s.JJ,Z.o,s.Zx,F.d],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-top:10px;margin-bottom:5px;border-radius:0%}.header-text[_ngcontent-%COMP%]{font-size:inherit}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function K(a,o){if(1&a&&e._UZ(0,"mat-option",15),2&a){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("value",t.index)("innerText",t.names[n.currentLanguage])}}function V(a,o){if(1&a&&(e.ynx(0),e.YNc(1,K,1,2,"mat-option",14),e.BQk()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.weaponType==n.charWeaponType)}}function X(a,o){if(1&a&&(e._UZ(0,"mat-option",15),e.ALo(1,"number"),e.ALo(2,"translate")),2&a){const t=e.oxw().$implicit;e.Q6J("value",t)("innerText",e.xi3(1,2,t.levelNum,"1.0-0")+(t.isAscend?e.lcZ(2,5,"PROPS.ASCENDED"):""))}}function G(a,o){if(1&a&&(e.ynx(0),e.YNc(1,X,3,7,"mat-option",14),e.BQk()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",t.levelNum<n.selectedWeaponAbleMaxLevel||t.levelNum==n.selectedWeaponAbleMaxLevel&&!t.isAscend)}}function j(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",16),e.ALo(2,"translate"),e._UZ(3,"td",17),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function ee(a,o){if(1&a&&(e.TgZ(0,"tr"),e._UZ(1,"td",16),e.ALo(2,"translate"),e._UZ(3,"td",17),e.ALo(4,"noComma"),e.ALo(5,"percent"),e.ALo(6,"noComma"),e.ALo(7,"number"),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("innerText",e.lcZ(2,3,"PROPS."+t)),e.xp6(2),e.Q6J("innerText",n.selectedLevelProps[t].isPercent?e.lcZ(4,5,e.xi3(5,7,n.selectedLevelProps[t].value,"1.0-1")):e.lcZ(6,10,e.xi3(7,12,n.selectedLevelProps[t].value,"1.0-0")))("matTooltip",n.selectedLevelProps[t].value)}}function te(a,o){if(1&a&&(e.ynx(0),e.YNc(1,ee,8,15,"tr",13),e.BQk()),2&a){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.selectedLevelProps[t]&&0!=n.selectedLevelProps[t].value)}}function ne(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",15),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",t)}}function ae(a,o){if(1&a){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider"),e.TgZ(2,"mat-expansion-panel",12)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e._UZ(5,"span",8),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"mat-panel-description"),e.qZA(),e.TgZ(8,"mat-form-field",7),e._UZ(9,"mat-label",8),e.ALo(10,"translate"),e.TgZ(11,"mat-select",9),e.NdJ("ngModelChange",function(l){return e.CHM(t),e.oxw().selectedSmeltingLevel=l})("ngModelChange",function(l){return e.CHM(t),e.oxw().onChangeSmeltingLevel(l)}),e.YNc(12,ne,2,2,"ng-container",10),e.qZA()(),e.TgZ(13,"div")(14,"span")(15,"strong"),e._uU(16),e.qZA()(),e._UZ(17,"br")(18,"span",18),e.qZA()(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("expanded",!0),e.xp6(3),e.Q6J("innerText",e.lcZ(6,7,"WEAPON.SMELTING")),e.xp6(4),e.Q6J("innerText",e.lcZ(10,9,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",t.selectedSmeltingLevel),e.xp6(1),e.Q6J("ngForOf",t.smeltingLevelOptions),e.xp6(4),e.Oqu(t.getEffectName(t.selectedSmeltingLevel)[t.currentLanguage]),e.xp6(2),e.Q6J("innerHTML",t.getEffectContent(t.selectedSmeltingLevel)[t.currentLanguage],e.oJD)}}let ie=(()=>{class a{constructor(t,n,l,i){this.httpService=t,this.weaponService=n,this.calculatorService=l,this.extraDataService=i,this.notExitLevel=-1,this.minLevel=1,this.maxLevel=90,this.minSmeltingLevel=1,this.maxSmeltingLevel=5,this.defaultSmeltingLevel=this.minSmeltingLevel.toString(),this.ascendLevels=[20,40,50,60,70,80,90],this.ascendLevelsMap={5:6,4:6,3:6,2:4,1:4},this.levelPadNum=2,this.smeltingLevelPadNum=1,this.props=r.hx.PROPS_WEAPON_BASE,this.props_sub=r.hx.PROPS_CHARA_WEAPON_SUB,this.percent_props=r.hx.PROPS_CHARA_WEAPON_PERCENT,this.weaponList=[],this.levelOptions=[],this.smeltingLevelOptions=[]}ngOnInit(){var t,n;this.charWeaponType=this.data.weaponType,this.initializeWeaponList();for(let i=this.minLevel;i<=this.maxLevel;++i)this.levelOptions.push({level:i.toString().padStart(this.levelPadNum,"0"),levelNum:i}),this.ascendLevels.includes(i)&&i!=this.maxLevel&&this.levelOptions.push({level:i.toString().padStart(this.levelPadNum,"0")+"+",levelNum:i,isAscend:!0});for(let i=this.minSmeltingLevel;i<=this.maxSmeltingLevel;++i)this.smeltingLevelOptions.push(i.toString().padStart(this.smeltingLevelPadNum,"0"));let l=this.weaponService.getIndex(this.data.id);if(l)this.selectedWeaponIndex=l;else for(let i=1;i<this.weaponList.length;++i)if(this.weaponList[i].weaponType==this.charWeaponType&&this.weaponList[i].rankLevel==this.maxSmeltingLevel){this.selectedWeaponIndex=this.weaponList[i].index;break}this.selectedLevel=null!==(t=this.getLevelFromString(this.weaponService.getLevel(this.data.id)))&&void 0!==t?t:this.levelOptions[this.levelOptions.length-1],this.selectedSmeltingLevel=null!==(n=this.getSmeltingLevelFromString(this.weaponService.getSmeltingLevel(this.data.id)))&&void 0!==n?n:this.defaultSmeltingLevel,this.onSelectWeapon(this.selectedWeaponIndex),this.onChangeLevel(this.selectedLevel),this.onChangeSmeltingLevel(this.selectedSmeltingLevel)}ngOnDestroy(){this.weaponService.saveData()}onSelectWeapon(t){var n;let l=this.notExitLevel;this.weaponData&&(l=this.ascendLevels[this.ascendLevelsMap[this.weaponData.rankLevel]],this.weaponService.clearExtraData(this.data.id)),this.weaponData=this.weaponService.get(t),this.weaponService.setDefaultExtraData(this.data.id,t),this.calculatorService.initWeaponData(this.data.id,t),console.log(this.weaponData),this.selectedWeaponAbleMaxLevel=this.ascendLevels[this.ascendLevelsMap[this.weaponData.rankLevel]],(l==this.notExitLevel||l==this.selectedLevel.levelNum||this.selectedLevel.levelNum>this.selectedWeaponAbleMaxLevel)&&(this.selectedLevel=null!==(n=this.getLevelFromString(this.weaponService.getLevel(this.data.id)))&&void 0!==n?n:this.levelOptions[this.selectedWeaponAbleMaxLevel+this.ascendLevels.indexOf(this.selectedWeaponAbleMaxLevel)-1],this.onChangeLevel(this.selectedLevel)),this.initializeBackGroundImage(),this.weaponService.setIndex(this.data.id,this.weaponData.id)}onChangeLevel(t){this.selectedLevelProps={};let n=this.weaponData.levelMap[t.level];for(let l in n){let i=l.toUpperCase();this.selectedLevelProps[i]={isPercent:this.percent_props.includes(i),value:n[l]}}this.weaponService.setLevel(this.data.id,t.level),this.calculatorService.setDirtyFlag(this.data.id)}onChangeSmeltingLevel(t){this.weaponService.setSmeltingLevel(this.data.id,t),this.calculatorService.initExtraWeaponData(this.data.id)}getEffectName(t){return this.weaponData.skillAffixMap[t].name}getEffectContent(t){return this.weaponData.skillAffixMap[t].desc}initializeBackGroundImage(){this.avatarLoadFlg=!1,this.httpService.get(this.weaponData.images.icon,"blob").then(n=>{n&&(this.avatarURL=window.URL.createObjectURL(n),setTimeout(()=>{this.avatarLoadFlg=!0},100))}).catch(()=>{})}initializeWeaponList(){this.weaponList=[];let t=this.weaponService.getMap();for(let n in t)this.weaponList.push({index:n,names:t[n].name,rankLevel:t[n].rankLevel,weaponType:t[n].weaponType})}getLevelFromString(t){if(!t)return;let n=parseInt(t),l=t.includes("+"),i=-1;for(let m=0;m<this.ascendLevels.length&&this.ascendLevels[m]<n;++m)++i;return this.levelOptions[i+(l?1:0)+n]}getSmeltingLevelFromString(t){if(t)return t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.OE),e.Y36(r.kv),e.Y36(r.RO),e.Y36(r.Xx))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-weapon"]],inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:31,vars:19,consts:[["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],["mat-card-avatar","",1,"avatar"],[1,"header-text"],["appearance","legacy","floatLabel","always"],[3,"innerText"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[1,"content"],[1,"mat-elevation-z0","expand",3,"expanded"],[4,"ngIf"],[3,"value","innerText",4,"ngIf"],[3,"value","innerText"],[1,"content-left",3,"innerText"],["matTooltipPosition","right",1,"content-right",3,"innerText","matTooltip"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.ynx(0),e.TgZ(1,"mat-card",0)(2,"div",1),e.O4$(),e.TgZ(3,"svg",2),e._UZ(4,"path",3)(5,"path",4),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header"),e._UZ(7,"div",5),e.TgZ(8,"mat-card-title",6)(9,"mat-form-field",7),e._UZ(10,"mat-label",8),e.ALo(11,"translate"),e.TgZ(12,"mat-select",9),e.NdJ("ngModelChange",function(i){return n.selectedWeaponIndex=i})("ngModelChange",function(i){return n.onSelectWeapon(i)}),e.YNc(13,V,2,1,"ng-container",10),e.qZA()()()(),e.TgZ(14,"mat-card-content",11),e._UZ(15,"mat-divider"),e.TgZ(16,"mat-expansion-panel",12)(17,"mat-expansion-panel-header")(18,"mat-panel-title"),e._UZ(19,"span",8),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"mat-panel-description"),e.qZA(),e.TgZ(22,"mat-form-field",7),e._UZ(23,"mat-label",8),e.ALo(24,"translate"),e.TgZ(25,"mat-select",9),e.NdJ("ngModelChange",function(i){return n.selectedLevel=i})("ngModelChange",function(i){return n.onChangeLevel(i)}),e.YNc(26,G,2,1,"ng-container",10),e.qZA()(),e.TgZ(27,"table"),e.YNc(28,j,8,15,"tr",10),e.YNc(29,te,2,1,"ng-container",10),e.qZA()(),e.YNc(30,ae,19,11,"ng-container",13),e.qZA()(),e.BQk()),2&t&&(e.xp6(7),e.Udp("background-image",n.avatarLoadFlg?"url("+n.avatarURL+")":""),e.xp6(3),e.Q6J("innerText",e.lcZ(11,13,"WEAPON.NAME")),e.xp6(2),e.Q6J("ngModel",n.selectedWeaponIndex),e.xp6(1),e.Q6J("ngForOf",n.weaponList),e.xp6(3),e.Q6J("expanded",!0),e.xp6(3),e.Q6J("innerText",e.lcZ(20,15,"WEAPON.PROPS")),e.xp6(4),e.Q6J("innerText",e.lcZ(24,17,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",n.selectedLevel),e.xp6(1),e.Q6J("ngForOf",n.levelOptions),e.xp6(2),e.Q6J("ngForOf",n.props),e.xp6(1),e.Q6J("ngForOf",n.props_sub),e.xp6(1),e.Q6J("ngIf",n.weaponData.skillAffixMap))},directives:[p.a8,_.Zt,_.Bh,p.dk,p.kc,p.n5,v.KE,v.hX,T.gD,u.JJ,u.On,s.sg,s.O5,O.ey,p.dn,A.d,g.ib,g.yz,g.yK,g.u4,S.gM],pipes:[f.X$,s.JJ,Z.o,s.Zx],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px;border-radius:0%}.header-text[_ngcontent-%COMP%]{font-size:inherit}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();var oe=c(24);function le(a,o){1&a&&e.GkF(0)}function re(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",4),e._UZ(3,"div",5),e.qZA()(),e.TgZ(4,"tr"),e._UZ(5,"td",6)(6,"td",7),e.qZA(),e.TgZ(7,"tr")(8,"td",4),e._UZ(9,"app-extra-data",8),e.qZA()(),e.BQk()),2&a){const t=o.$implicit,n=o.index,l=e.oxw(2);e.xp6(5),e.Q6J("innerText",t.desc),e.xp6(1),e.Q6J("innerText",l.showValues[n])("matTooltip",l.tipValues[n]),e.xp6(3),e.Q6J("characterIndex",l.data.id)("skill",l.skill)("valueIndexs",t.valuePropIndexs)("overrideElement",l.overrideElement)}}function se(a,o){if(1&a&&(e.TgZ(0,"table"),e.YNc(1,re,10,7,"ng-container",3),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.skillDescDatas)}}function ce(a,o){}let pe=(()=>{class a{constructor(t,n,l,i){this.percentPipe=t,this.decimalPipe=n,this.noCommaPipe=l,this.calculatorService=i}ngOnInit(){this.initDatas()}initDatas(){this.skillDescDatas=this.getCharSkillDescObject(this.skill,this.currentLanguage),this.showValues=[],this.tipValues=[];for(let t of this.skillDescDatas)this.showValues.push(this.getTalentValue(this.skill,t,this.currentLanguage,this.skillLevelIndex)),this.tipValues.push(this.getTalentValue(this.skill,t,this.currentLanguage,this.skillLevelIndex,!0))}getDataProperty(t){return this.data.skills[t]}getDataProperties(t){return this.data.skills[t]}getCharSkillDescObject(t,n){return this.getDataProperty(t).paramDescSplitedList[n]}getTalentValue(t,n,l,i,h=!1){let m=n.prefix,y=[];n.valuePropIndexs.forEach((C,Me)=>{let P=this.data.skills[t].paramMap[i][C];h||(P=n.isPercent[Me]?this.percentPipe.transform(P,"1.0-1"):this.noCommaPipe.transform(this.decimalPipe.transform(P,"1.0-1"))),y.push(`${P}`)});let N=0,Ze=n.middles.length;for(let C=0;C<y.length;++C)m+=y[C],N<Ze&&(m+=n.middles[N++]);return m+=n.suffix,m}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.Zx),e.Y36(s.JJ),e.Y36(r.od),e.Y36(r.RO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-extra-info"]],inputs:{data:"data",skill:"skill",currentLanguage:["language","currentLanguage"],skillLevelIndex:"skillLevelIndex",hasLevel:"hasLevel"},decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["skills",""],["other",""],[4,"ngFor","ngForOf"],["colspan","2"],[1,"placeholder"],[3,"innerText"],["matTooltipPosition","right",3,"innerText","matTooltip"],[3,"characterIndex","skill","valueIndexs","overrideElement"]],template:function(t,n){if(1&t&&(e.YNc(0,le,1,0,"ng-container",0),e.YNc(1,se,2,1,"ng-template",null,1,e.W1O),e.YNc(3,ce,0,0,"ng-template",null,2,e.W1O)),2&t){const l=e.MAs(2),i=e.MAs(4);e.Q6J("ngIf",n.hasLevel)("ngIfThen",l)("ngIfElse",i)}},directives:[s.O5,s.sg,S.gM,oe.f],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(1)   td[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}tr[_ngcontent-%COMP%]:nth-of-type(3n+2)   td[_ngcontent-%COMP%]:nth-of-type(1){text-align:left}tr[_ngcontent-%COMP%]:nth-of-type(3n+2)   td[_ngcontent-%COMP%]:nth-of-type(2){text-align:right}tr[_ngcontent-%COMP%]:nth-of-type(3n+3)   td[_ngcontent-%COMP%]:nth-of-type(1){text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}tr[_ngcontent-%COMP%]:nth-of-type(3n+3)   td[_ngcontent-%COMP%]:nth-of-type(2){text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.placeholder[_ngcontent-%COMP%]{height:2px}"]}),a})();function ge(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"mat-option",15),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("value",t)("innerText",t.levelNum)}}function de(a,o){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header",10)(3,"mat-panel-title"),e._UZ(4,"span",6),e.qZA()(),e.TgZ(5,"mat-form-field",11),e._UZ(6,"mat-label",6),e.ALo(7,"translate"),e.TgZ(8,"mat-select",12),e.NdJ("ngModelChange",function(l){const h=e.CHM(t).$implicit;return e.oxw(2).selectedLevels[h]=l})("ngModelChange",function(l){const h=e.CHM(t).$implicit;return e.oxw(2).onChangeLevel(h,l)}),e.YNc(9,ge,2,2,"ng-container",8),e.qZA()(),e._UZ(10,"app-extra-info",13)(11,"br")(12,"span",14),e.qZA(),e.BQk()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("innerText",n.getDataProperty(t).name[n.currentLanguage]),e.xp6(2),e.Q6J("innerText",e.lcZ(7,10,"PROPS.LEVEL")),e.xp6(2),e.Q6J("ngModel",n.selectedLevels[t]),e.xp6(1),e.Q6J("ngForOf",n.levelOptions),e.xp6(1),e.Q6J("data",n.data)("skill",t)("language",n.currentLanguage)("hasLevel",!0)("skillLevelIndex",n.selectedLevels[t].level),e.xp6(2),e.Q6J("innerHTML",n.getDataProperty(t).desc[n.currentLanguage],e.oJD)}}function he(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header",10)(3,"mat-panel-title"),e._UZ(4,"span",6),e.qZA()(),e._UZ(5,"app-extra-info",13)(6,"br")(7,"span",14),e.qZA(),e.BQk()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("innerText",n.getDataProperty(t).name[n.currentLanguage]),e.xp6(1),e.Q6J("data",n.data)("skill",t)("language",n.currentLanguage)("hasLevel",!0)("skillLevelIndex",n.talentDefaultLevel),e.xp6(2),e.Q6J("innerHTML",n.getDataProperty(t).desc[n.currentLanguage],e.oJD)}}function me(a,o){if(1&a&&(e.ynx(0),e.YNc(1,he,8,7,"ng-container",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.getDataProperty(t).name)}}function _e(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._UZ(4,"span",6),e.qZA()(),e._UZ(5,"span",14),e.qZA(),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(4);e.xp6(4),e.Q6J("innerText",t.name[n.currentLanguage]),e.xp6(1),e.Q6J("innerHTML",t.desc[n.currentLanguage],e.oJD)}}function xe(a,o){if(1&a&&(e.ynx(0),e.YNc(1,_e,6,2,"ng-container",8),e.BQk()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.getDataProperties(t))}}function ve(a,o){if(1&a&&(e.ynx(0),e.YNc(1,xe,2,1,"ng-container",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.getDataProperty(t))}}function ue(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-card",1)(2,"div",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header"),e._UZ(7,"mat-card-title",6),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-card-content",7)(10,"mat-accordion"),e.YNc(11,de,13,12,"ng-container",8),e.YNc(12,me,2,1,"ng-container",8),e.YNc(13,ve,2,1,"ng-container",8),e.qZA()()(),e.BQk()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("innerText",e.lcZ(8,4,"CHARACTER.TALENTS")),e.xp6(4),e.Q6J("ngForOf",t.skills),e.xp6(1),e.Q6J("ngForOf",t.otherSkills),e.xp6(1),e.Q6J("ngForOf",t.prundSkills)}}let Le=(()=>{class a{constructor(t,n,l,i,h){this.percentPipe=t,this.decimalPipe=n,this.noCommaPipe=l,this.characterService=i,this.calculatorService=h,this.minLevel=1,this.maxLevel=15,this.defaultLevel=10,this.skills=[r.hx.NAME_SKILLS_NORMAL,r.hx.NAME_SKILLS_SKILL,r.hx.NAME_SKILLS_ELEMENTAL_BURST],this.otherSkills=[r.hx.NAME_SKILLS_OTHER],this.prundSkills=[r.hx.NAME_SKILLS_PROUD],this.levelPadNum=2,this.talentDefaultLevel=r.hx.NAME_TALENT_DEFAULT_LEVEL,this.props=r.hx.PROPS_CHARA_ENEMY_BASE,this.props_sub=r.hx.PROPS_CHARA_WEAPON_SUB,this.percent_props=r.hx.PROPS_CHARA_WEAPON_PERCENT,this.levelOptions=[],this.selectedLevels={}}ngOnInit(){var t,n,l;for(let i=this.minLevel;i<=this.maxLevel;++i)this.levelOptions.push({level:i.toString().padStart(this.levelPadNum,"0"),levelNum:i});for(let i of this.skills){let h;switch(i){case r.hx.NAME_SKILLS_NORMAL:h=null!==(t=this.getLevelFromString(this.characterService.getNormalLevel(this.data.id)))&&void 0!==t?t:this.levelOptions[this.defaultLevel-1];break;case r.hx.NAME_SKILLS_SKILL:h=null!==(n=this.getLevelFromString(this.characterService.getSkillLevel(this.data.id)))&&void 0!==n?n:this.levelOptions[this.defaultLevel-1];break;case r.hx.NAME_SKILLS_ELEMENTAL_BURST:h=null!==(l=this.getLevelFromString(this.characterService.getElementalBurstLevel(this.data.id)))&&void 0!==l?l:this.levelOptions[this.defaultLevel-1]}this.selectedLevels[i]=h,this.onChangeLevel(i,this.selectedLevels[i],!0)}this.calculatorService.initExtraCharacterData(this.data.id)}onChangeLevel(t,n,l=!1){switch(t){case r.hx.NAME_SKILLS_NORMAL:this.characterService.setNormalLevel(this.data.id,n.level);break;case r.hx.NAME_SKILLS_SKILL:this.characterService.setSkillLevel(this.data.id,n.level);break;case r.hx.NAME_SKILLS_ELEMENTAL_BURST:this.characterService.setElementalBurstLevel(this.data.id,n.level)}l||this.calculatorService.initExtraCharacterData(this.data.id)}getDataProperty(t){return this.data.skills[t]}getDataProperties(t){return this.data.skills[t]}getCharSkillDescObject(t,n){return this.getDataProperty(t).paramDescSplitedList[n]}getLevelFromString(t){if(t)return this.levelOptions[parseInt(t)-1]}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(s.Zx),e.Y36(s.JJ),e.Y36(Z.o),e.Y36(r.AE),e.Y36(r.RO))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-talent"]],inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","expand"],["matTooltipPosition","right"],["appearance","legacy","floatLabel","always"],[3,"ngModel","ngModelChange"],[1,"extra-info",3,"data","skill","language","hasLevel","skillLevelIndex"],[3,"innerHTML"],[3,"value","innerText"]],template:function(t,n){1&t&&e.YNc(0,ue,14,6,"ng-container",0),2&t&&e.Q6J("ngIf",n.data.skills.normal.name)},directives:[s.O5,p.a8,_.Zt,_.Bh,p.dk,p.n5,p.dn,g.pp,s.sg,g.ib,g.yz,g.yK,v.KE,v.hX,T.gD,u.JJ,u.On,O.ey,pe],pipes:[f.X$],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();function fe(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-expansion-panel",9)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._UZ(4,"span",6),e.qZA()(),e._UZ(5,"span",10),e.qZA(),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("innerText",t.name[n.currentLanguage]),e.xp6(1),e.Q6J("innerHTML",t.desc[n.currentLanguage],e.oJD)}}function Ce(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-card",1)(2,"div",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5),e.qZA()(),e.kcU(),e.TgZ(6,"mat-card-header"),e._UZ(7,"mat-card-title",6),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"mat-card-content",7)(10,"mat-accordion"),e.YNc(11,fe,6,2,"ng-container",8),e.qZA()()(),e.BQk()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("innerText",e.lcZ(8,2,"CHARACTER.CONSTELLATION")),e.xp6(4),e.Q6J("ngForOf",t.data.skills.talents)}}let Pe=(()=>{class a{constructor(){this.constellationPrefix="c",this.constellationNum=[1,2,3,4,5,6],this.props=r.hx.PROPS_CHARA_ENEMY_BASE,this.props_sub=r.hx.PROPS_CHARA_WEAPON_SUB,this.percent_props=r.hx.PROPS_CHARA_WEAPON_PERCENT}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-constellation"]],inputs:{data:"data",currentLanguage:["language","currentLanguage"]},decls:1,vars:1,consts:[[4,"ngIf"],["cdkDrag","",1,"card"],["cdkDragHandle","",1,"drap-handle"],["width","24px","fill","currentColor","viewBox","0 0 24 24"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[3,"innerText"],[1,"content"],[4,"ngFor","ngForOf"],[1,"mat-elevation-z0","expand"],[3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,Ce,12,4,"ng-container",0),2&t&&e.Q6J("ngIf",n.data.skills.talents)},directives:[s.O5,p.a8,_.Zt,_.Bh,p.dk,p.n5,p.dn,g.pp,s.sg,g.ib,g.yz,g.yK],pipes:[f.X$],styles:[".card[_ngcontent-%COMP%]{max-width:350px;min-width:350px;margin:12px}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background-size:cover;margin-bottom:5px}.content[_ngcontent-%COMP%]{padding-top:2px}.expand[_ngcontent-%COMP%]{margin-top:1px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-left[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .content-right[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12)}.content-left[_ngcontent-%COMP%]{text-align:left;border-bottom:1px solid rgba(0,0,0,.12)}.content-right[_ngcontent-%COMP%]{text-align:right;border-bottom:1px solid rgba(0,0,0,.12)}.content-right-button[_ngcontent-%COMP%]{text-align:center;border-bottom:none}.drap-handle[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#ccc;cursor:move;width:24px;height:24px}"]}),a})();const x="beforeLoad",L="loaded",Te=[{path:"",component:(()=>{class a{constructor(t,n,l,i,h){this.httpService=t,this.route=n,this.characterService=l,this.calculatorService=i,this.languageService=h,this.imgState=x,this.otherState=x,this.currentLanguage=this.languageService.getCurrentLang(),this.languageService.getLang().subscribe(m=>{this.currentLanguage=m}),setTimeout(()=>{this.otherState=L},100)}ngOnInit(){this.route.queryParams.subscribe(t=>{this.data=this.characterService.get(t.index),this.currentCharacterIndex=t.index.toString(),this.initializeBackGroundImage(),this.characterService.setDefaultExtraData(t.index),this.calculatorService.initCharacterData(t.index),console.log(this.data),console.log(this.characterService.getExtraData(t.index))})}ngOnDestroy(){this.backgroundLoadFlg=!1,this.otherState=x,this.imgState=x}initializeBackGroundImage(){if(!this.backgroundURL){let t=this.data.images.background;t&&this.httpService.get(t,"blob").then(n=>{n&&(this.backgroundURL=window.URL.createObjectURL(n),setTimeout(()=>{this.imgState=L},100))}).catch(()=>{})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.OE),e.Y36(M.gz),e.Y36(r.AE),e.Y36(r.RO),e.Y36(r.TS))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-main"]],decls:14,vars:14,consts:[[1,"main"],[1,"background"],["fxLayout","row wrap","fxLayoutAlign","center",1,"content"],[3,"data","language"],[1,"middle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",1),e.qZA(),e.TgZ(3,"div",2)(4,"div"),e._UZ(5,"app-character",3)(6,"div",4)(7,"app-enemy",3),e.qZA(),e.TgZ(8,"div"),e._UZ(9,"app-weapon",3),e.qZA(),e.TgZ(10,"div"),e._UZ(11,"app-talent",3),e.qZA(),e.TgZ(12,"div"),e._UZ(13,"app-constellation",3),e.qZA()()()),2&t&&(e.xp6(1),e.Udp("background-image","url("+n.backgroundURL+")"),e.Q6J("@imgLoad",n.imgState),e.xp6(2),e.Q6J("@otherLoad",n.otherState),e.xp6(2),e.Q6J("data",n.data)("language",n.currentLanguage),e.xp6(2),e.Q6J("data",n.data)("language",n.currentLanguage),e.xp6(2),e.Q6J("data",n.data)("language",n.currentLanguage),e.xp6(2),e.Q6J("data",n.data)("language",n.currentLanguage),e.xp6(2),e.Q6J("data",n.data)("language",n.currentLanguage))},directives:[b.xw,b.Wh,I,q,ie,Le,Pe],styles:[".main[_ngcontent-%COMP%]{height:100%}.content[_ngcontent-%COMP%]{padding:6px}.background[_ngcontent-%COMP%]{position:fixed;bottom:0;background-position:right top;background-size:cover;z-index:-10;min-height:100%;width:100%}.background-content[_ngcontent-%COMP%]{position:fixed;min-height:100%;width:100%}.middle[_ngcontent-%COMP%]{margin-top:24px}"],data:{animation:[(0,d.X$)("imgLoad",[(0,d.SB)(x,(0,d.oB)({opacity:.01})),(0,d.SB)(L,(0,d.oB)({opacity:.16})),(0,d.eR)(x+"=>"+L,[(0,d.jt)("1s")]),(0,d.eR)(L+"=>"+x,[(0,d.jt)("0.2s")])]),(0,d.X$)("otherLoad",[(0,d.SB)(x,(0,d.oB)({opacity:.01})),(0,d.SB)(L,(0,d.oB)({opacity:1})),(0,d.eR)(x+"=>"+L,[(0,d.jt)("0.5s")]),(0,d.eR)(L+"=>"+x,[(0,d.jt)("0.2s")])])]}}),a})()}];let Oe=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[M.Bz.forChild(Te)],M.Bz]}),a})(),Se=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[s.Zx,s.JJ,r.od,r.dG],imports:[[s.ez,J.o9,k.h,Oe,r.m8]]}),a})()}}]);